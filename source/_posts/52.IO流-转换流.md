---
title: 52.IO流-转换流
date: 2019-09-26 09:38:00
author: 𝚲𝚳𝚲
tags:   # 添加博文标签
	- java基础
categories:   # 添加博文分类
	- java

---

<h1><center>IO流-转换流</center></h1>

## 一、转换流

- ### 转换流：是字节流，与字符流之间的桥梁

![image-20240709014159796](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407090142769.png)

# 练习

- ## 转换文件编码

##### 需求1：手动创建一个GBK的文件，把文件中的中文读取到内存中，不能出现乱码

```java
package com.atlml.io_stream;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.nio.charset.Charset;

/**
 * 输入 转换流
 */
public class InputStreamReadDemo extends ConversionFlowTest {
    public static void main(String[] args) throws IOException {

        /**
         * 需求1：手动创建一个GBK的文件，把文件中的中文读取到内存中，不能出现乱码
         *  了解 一下， 这种方式在JDK11时 被淘汰了
         *
         */
        // gbkcsb.txt 文件在本地就是GBK编码
    /*    InputStreamReader gbk = new InputStreamReader(new FileInputStream("javabasis/aaa/gbkcsb.txt"),"GBK");
        int len;
        char[] chars = new char[8192];
        while ((len=gbk.read(chars))!=-1){
            for (char aChar : chars) {
                System.out.print(aChar);
            }
        }

        gbk.close();
    */
        
        /**
         * 替代方案
         * 直接使用 FileReader 来指定 编码读取文本
         */
        FileReader fr = new FileReader("javabasis/aaa/gbkcsb.txt", Charset.forName("GBK"));
        BufferedReader bfr = new BufferedReader(fr);
        String line;
        while ((line = bfr.readLine()) != null) {
            System.out.println(line);
        }
        bfr.close();

    }

}

```

##### 需求2：把一段中文按照GBK的方式写到本地文件

```java
package com.atlml.io_stream;

import java.io.BufferedWriter;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStreamWriter;

/**
 * 输出 转换流
 */
public class OutPutStreamWriteDemo extends ConversionFlowTest {
    public static void main(String[] args) throws IOException {
        /**
         * 需求2：把一段中文按照GBK的方式写到本地文件
         *  这里是追加到 gbkcsb.txt文本文件后面
         */
        OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream("javabasis/aaa/gbkcsb.txt", true), "GBK");

        BufferedWriter bufferedWriter = new BufferedWriter(osw);//使用字符缓冲流包一下
        bufferedWriter.newLine();//可以使用 换行
        bufferedWriter.write("出师表，诸葛亮，躬耕南阳，采菊东篱");
        bufferedWriter.close();
        osw.close();
    }
}

```

##### 需求3：将本地文件中的GBK文件，转成UTF-8

```java
package com.atlml.io_stream;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.nio.charset.Charset;


public class EncodingConversion extends ConversionFlowTest {
    public static void main(String[] args) throws IOException {
        /**
         * 需求3：将本地文件中的GBK文件，转成UTF-8
         */

        // 1.JDK11之前的写法
        /*BufferedReader bfr = new BufferedReader(new InputStreamReader(new FileInputStream("javabasis/aaa/gbkcsb.txt"), "GBK"));
        BufferedWriter bfw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream("javabasis/aaa/utf-8csb.txt"), "UTF-8"));
        String line;
        while ((line=bfr.readLine())!=null){
            bfw.newLine();
            bfw.write(line);
        }
        bfw.close();
        bfr.close();
        */
        // JDK11之后的写法
        BufferedReader bfr = new BufferedReader(new FileReader("javabasis/aaa/gbkcsb.txt", Charset.forName("GBK")));
        BufferedWriter bfw = new BufferedWriter(new FileWriter("javabasis/aaa/utf-8csb.txt", Charset.forName("UTF-8")));
        String line;
        while ((line = bfr.readLine()) != null) {
            bfw.write(line);
            bfw.newLine();
        }
        bfw.close();
        bfr.close();


    }
}

```

![image-20240709030531972](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407090305901.png)









![image-20240709030039577](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407090300598.png)



---


----

© 版权声明

<escape>

<div>
    <h3 align="center"  style="color: brown;" >版权声明</h3>
    <table>
   		<tr>
    		<ol>
				<li>本网站名称：𝚲𝚳𝚲</li>
				<li>𝚲𝚳𝚲提供的资源仅供您个人用于非商业性目的。</li>
				<li>本站文章部分内容可能来源于网络，仅供大家学习与参考，如有侵权，请联系我进行删除处理。</li>
				<li>本站一切资源不代表本站立场，并不代表本站赞同其观点和对其真实性负责。</li>
        		<li>本站一律禁止以任何方式发布或转载任何违法的相关信息，访客发现请举报</li> 
        		<li>本站资源大多存储在云盘，如发现链接失效，请联系我，我会第一时间更新。</li>
        		<li>本站强烈打击盗版/破解等有损他人权益和违法作为，请支持正版！</li>  
			</ol>
		</tr>
	</table>
</div>


</escape>

----

