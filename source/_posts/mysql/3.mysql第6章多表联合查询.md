---
title: 3.mysqlç¬¬6ç« å¤šè¡¨è”åˆæŸ¥è¯¢
date: 2019-10-03 10:00:00
author: ğš²ğš³ğš²
tags:   # æ·»åŠ åšæ–‡æ ‡ç­¾
	- mysql8.0.22
categories:   # æ·»åŠ åšæ–‡åˆ†ç±»
	- mysql8.0.22


---

<h1><center>å¤šè¡¨è”åˆæŸ¥è¯¢.md</center></h1>



```mysql
/**
  ç¬¬å…­ç« ï¼šå¤šè¡¨è”æŸ¥
        åœ¨ç°å®æƒ…å†µä¸­ï¼ŒæŸ¥è¯¢å­—æ®µä¸åœ¨åŒä¸€å¼ è¡¨ä¸­ï¼Œå°±éœ€è¦å¤šå¼ è¡¨è¿›è¡Œè”åˆæŸ¥è¯¢
        å¤šè¡¨è”æŸ¥ï¼Œéœ€è¦æœ‰ è¿æ¥æ¡ä»¶
  æ³¨æ„ï¼šåœ¨å¤šè¡¨è”æŸ¥çš„æ—¶å€™ï¼Œå¤šå¼ è¡¨è¯·åŠ¡å¿…å–åˆ«åï¼Œä½¿ç”¨åˆ«åï¼ŒæŒ‡å®šå­—æ®µæ˜¯å“ªä¸ªè¡¨ä¸­çš„ï¼Œè¿™æ ·æé«˜æŸ¥è¯¢çš„é€Ÿåº¦

  sql çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼š
        1.å…ˆæ‰§è¡Œfrom æŒ‘å‡ºè¡¨
            from è¡¨1ï¼Œè¡¨2.(æŒ‘å‡ºè¿™ä¸¤ä¸ªè¡¨æ¥)
        2.æ‰§è¡Œwhere ç­›é€‰æ¡ä»¶ï¼Œä»¥åŠåé¢çš„è¯­å¥
            where ç­›é€‰æ¡ä»¶
            order by
            limit 0,10;
        3.æœ€åæŒ‘é€‰å‡ºéœ€è¦çš„å­—æ®µ
            select æŒ‡å®šå­—æ®µ
  æ‰€ä»¥åœ¨from åé¢ç»™è¡¨èµ·äº†åˆ«åï¼Œå°±ä¼šè¦†ç›–åŸè¡¨åï¼Œåœ¨åç»­çš„order by ...ç­‰ç­‰çš„è¯­å¥ä¸­ï¼Œå¿…é¡»ä½¿ç”¨è¡¨çš„åˆ«åæ¥æŒ‡å®š
 */

## æŸ¥è¯¢å‘˜å·¥è¡¨
select *
from employees;
## æŸ¥è¯¢éƒ¨é—¨è¡¨
select *
from departments;


/**
   sql  99ç‰ˆæœ¬çš„å†™æ³•
        å¤šè¡¨è”æŸ¥
        ä¸¤ä¸ª äº¤è¡¨ï¼Œåˆå«ä¸¤ä¸ªè¡¨è”æŸ¥
    å¤šè¡¨æŸ¥è¯¢çš„åˆ†ç±»
        è§’åº¦1ï¼š ç­‰å€¼è¿æ¥ vs éç­‰å€¼è¿æ¥
        è§’åº¦2ï¼š è‡ªè¿æ¥ vs éè‡ªè¿æ¥
        è§’åº¦3ï¼š å†…è¿æ¥ VS å¤–è¿æ¥
 */

## å°† å‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨è¿›è¡Œè”åˆæŸ¥è¯¢
## è¿™ç§92å†™æ³• ä¸ç”¨
## ç­‰å€¼è¿æ¥
select *
from employees e,
     departments d
where e.department_id = d.department_id;

## éç­‰å€¼è¿æ¥
select *
from employees e,
     job_grades jg
where e.salary between jg.lowest_sal and jg.highest_sal;

/**
  è‡ªè¿æ¥ VS éè‡ªè¿æ¥
    è¡¨ï¼šè¡¨ï¼Œè‡ªå·±è¿æ¥è‡ªå·±
 */
# è‡ªè¿æ¥ï¼Œç»ƒä¹ ï¼šæŸ¥è¯¢å‘˜å·¥id å‘˜å·¥å§“å åŠå…¶ç®¡ç†è€…idä»¥åŠå§“å
# æ€è·¯ï¼šç®¡ç†è€…ä¹Ÿæ˜¯å‘˜å·¥ï¼Œå‘˜å·¥è¡¨è‡ªå·±è¿æ¥è‡ªå·±ï¼Œå°†ä¸€å¼ è¡¨çœ‹ä½œæ˜¯ å‘˜å·¥è¡¨ï¼Œå¦ä¸€å¼ è¡¨çœ‹ä½œæ˜¯ ç®¡ç†è€…è¡¨
# å†…è¿æ¥ï¼šä½¿ç”¨ join  on  (å–ä¸¤ä¸ªè¡¨äº¤é›†çš„ç»“æœï¼Œæ»¡è¶³on æ¡ä»¶çš„æ‰€æœ‰ç»“æœ)
# å¾—åˆ°çš„ç»“æœæ˜¯ æ»¡è¶³on åé¢çš„ æ¡ä»¶çš„
select e.employee_id, e.last_name, e.manager_id, gl.employee_id, gl.last_name, gl.manager_id
from employees e
         join employees gl
              on e.employee_id = gl.manager_id
order by e.salary desc;



/**
  å†…è¿æ¥vså¤–è¿æ¥

  å†…è¿æ¥ï¼šåˆå¹¶å…·æœ‰åŒä¸€åˆ—çš„ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¡Œï¼Œç»“æœé›†ä¸­ ä¸åŒ…å«ä¸€ä¸ªè¡¨ä¸å¦ä¸€ä¸ªè¡¨ä¸åŒ¹é…çš„è¡Œ
  å¤–è¿æ¥ï¼šåˆå¹¶å…·æœ‰åŒä¸€åˆ—çš„ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¡Œ,ç»“æœé›†ä¸­é™¤äº†åŒ…å«ä¸€ä¸ªè¡¨ä¸å¦ä¸€ä¸ªè¡¨åŒ¹é…çš„è¡Œä¹‹å¤–,è¿˜æŸ¥è¯¢åˆ°äº†å·¦è¡¨æˆ–å³è¡¨ä¸­ä¸åŒ¹é…çš„è¡Œã€‚
            å·¦å¤–è¿æ¥ï¼šæŸ¥è¯¢çš„ç»“æœé›†ä¸­ï¼ŒåŒ…å«å·¦è¡¨çš„æ‰€æœ‰å€¼(å·¦è¡¨ä¸­ä¸åŒ¹é…çš„è¡Œ,ä¹Ÿä¼šå­˜åœ¨)ï¼Œä»¥åŠonåé¢æ¡ä»¶ï¼Œä¸¤ä¸ªè¡¨ä¹‹é—´åŒ¹é…çš„è¡Œ
            å³å¤–è¿æ¥ï¼šæŸ¥è¯¢çš„ç»“æœé›†ä¸­ï¼ŒåŒ…å«å³è¡¨çš„æ‰€æœ‰å€¼(å³è¡¨ä¸­ä¸åŒ¹é…çš„è¡Œ,ä¹Ÿä¼šå­˜åœ¨)ï¼Œä»¥åŠonåé¢æ¡ä»¶ï¼Œä¸¤ä¸ªè¡¨ä¹‹é—´åŒ¹é…çš„è¡Œ
            æ»¡å¤–è¿æ¥ï¼šå·¦è¡¨ï¼Œå³è¡¨æ‰€æœ‰çš„åŒ¹é…çš„è¡Œå–å‡ºæ¥ï¼Œä¹ŸåŒ…æ‹¬æœ‰ å·¦è¡¨ä¸åŒ¹é…çš„è¡Œï¼Œä»¥åŠå³è¡¨ä¸åŒ¹é…çš„è¡Œã€‚
    å·¦å¤–è¿æ¥:ä¸¤ä¸ªè¡¨åœ¨è¿æ¥è¿‡ç¨‹ä¸­é™¤äº†è¿”å›æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œä»¥å¤–ï¼Œè¿˜è¿”å›å·¦è¡¨ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œã€‚
    å³å¤–è¿æ¥:ä¸¤ä¸ªè¡¨åœ¨è¿æ¥è¿‡ç¨‹ä¸­é™¤äº†è¿”å›æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œä»¥å¤–ï¼Œè¿˜è¿”å›å³è¡¨ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œã€‚
 */
/**
  å†…è¿æ¥
   employeeså‘˜å·¥è¡¨107è¡Œæ•°æ®ã€‚ departmentsæ˜¯ éƒ¨é—¨è¡¨
  # ä¸‹é¢è¯­å¥ç»“æœé›†æœ‰106è¡Œï¼Œå› ä¸ºemployeeså‘˜å·¥è¡¨ä¸­æœ‰ä¸€ä¸ªäººçš„ department_idä¸ºnull å®ƒæ²¡æœ‰éƒ¨é—¨ï¼Œæ‰€ä»¥ç»“æœä¸­æ²¡æœ‰å®ƒ
    # å…¶ä»–æ‰€æœ‰äººéƒ½æœ‰ department_id ï¼Œæ‰€æœ‰äººéƒ½æœ‰éƒ¨é—¨ã€‚æ‰€ä»¥ç»“æœ 106æ¡ï¼ˆå–ä¸¤è¡¨åŒ¹é…çš„è¡Œç»„æˆç»“æœé›†ï¼Œå–äº¤é›†ï¼‰
  ç»ƒä¹ ï¼šæŸ¥è¯¢å‘˜å·¥ last name å§“å ,department_nameéƒ¨é—¨å§“å ä¿¡æ¯ï¼ˆè¿™é‡Œé¢æ˜¯æŸ¥è¯¢å‘˜å·¥çš„ï¼Œéƒ¨é—¨ä¿¡æ¯ï¼Œæœ‰çš„å‘˜å·¥æ²¡æœ‰å­˜åœ¨ä»»ä½•ä¸€ä¸ªéƒ¨é—¨é‚£ä¹ˆç»“æœå°±ä¸è¿”å›ï¼Œè¿™é‡Œæ˜¯å†…è¿æ¥å–äº¤é›†ï¼‰
 */
select *
from employees e
         join departments d on e.department_id = d.department_id;

/**
  # å·¦å¤–è¿æ¥
  employeeså‘˜å·¥è¡¨107è¡Œæ•°æ®ã€‚ departmentsæ˜¯ éƒ¨é—¨è¡¨
   ç»ƒä¹ ï¼šæŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥ last name å§“å ,department_nameéƒ¨é—¨å§“å ä¿¡æ¯
  ï¼ˆè¿™é‡Œé¢æ˜¯æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„ï¼Œéƒ¨é—¨ä¿¡æ¯ï¼Œå³ä½¿å‘˜å·¥ä¸å­˜åœ¨éƒ¨é—¨ï¼Œå‘˜å·¥ä¿¡æ¯ä¹Ÿè¦è¿”å›ï¼Œæ‰€ä»¥æ˜¯ å·¦å¤–è¿æ¥ æŸ¥è¯¢ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯ æ‰€æœ‰å‘˜å·¥åŒ¹é…æ‰€æœ‰éƒ¨é—¨çš„è¡Œï¼Œä»¥åŠåŒ…æ‹¬ä¸å­˜åœ¨éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯è¡Œä¹Ÿåœ¨ç»“æœé›†ä¸­ï¼‰
# ç»“æœæ˜¯ å·¦è¡¨æ‰€æœ‰å€¼ï¼Œä»¥åŠ æ»¡è¶³æ¡ä»¶çš„äº¤é›†å€¼
# ç»“æœ107è¡Œï¼Œè™½ç„¶employeeså‘˜å·¥è¡¨ä¸­Kingçš„ department_idä¸ºnull å®ƒæ²¡æœ‰éƒ¨é—¨ï¼Œä½†æ˜¯è¿™ä¸ªleft join å·¦è¡¨æ‰€æœ‰å‘˜å·¥éƒ½å±•ç¤ºå‡ºæ¥ï¼Œäº¤è¡¨éƒ¨åˆ†æ²¡æœ‰å€¼å°±null ç€
#                                                                               department_id
# 178,Kimberely,Grant,KGRANT,011.44.1644.429263,1999-05-24,SA_REP,7000,0.15,149,    null,       null,null,null,

 */
select *
from employees e
         left join departments d on e.department_id = d.department_id;


/**
  æ»¡å¤–è¿æ¥
   mysql ä¸æ”¯æŒæ»¡å¤–è¿æ¥ FULL JOIN ON
   å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ç°æ»¡å¤–é“¾æ¥

  ä¸€èˆ¬åœ¨ä½¿ç”¨æ»¡å¤–é“¾æ¥ï¼Œä½¿ç”¨åˆ°åˆå¹¶å¤šä¸ªç»“æœé›†çš„æ“ä½œ

  ä½¿ç”¨ UNION æ“ä½œç¬¦ åˆå¹¶æŸ¥è¯¢ç»“æœ
  UNIONæ“ä½œç¬¦è¿”å›ä¸¤ä¸ªæŸ¥è¯¢çš„ç»“æœé›†çš„å¹¶é›†,å»é™¤é‡å¤è®°å½•.ï¼ˆå¤šä¸€æ­¥å»é‡æ“ä½œï¼‰
  å¼€å‘ä¸­ä¸€èˆ¬ä½¿ç”¨
    UNION ALL  è¿›è¡Œ ä¸¤ä¸ªæŸ¥è¯¢ç»“æœé›†æ±‚å¹¶é›†ï¼Œä¸å»é‡ï¼Œæ•ˆç‡é«˜
ç»“è®º:å¦‚æœæ˜ç¡®çŸ¥é“åˆå¹¶æ•°æ®åçš„ç»“æœæ•°æ®ä¸å­˜åœ¨é‡å¤æ•°æ®,æˆ–è€…ä¸éœ€è¦å»é™¤é‡å¤çš„æ•°æ®ï¼Œåˆ™å°½é‡ä½¿ç”¨UMION ALLè¯­å¥,ä»¥æé«˜æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡

 */

```









## äºŒã€ä¸ƒç§JOINçš„å®ç°

![Snipaste_2024-10-08_23-15-32](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202410082319686.jpg)

```mysql
# ä¸­å›¾ï¼šå†…è¿æ¥ï¼ˆåªè¦ä¸¤è¡¨ä¹‹é—´çš„å…±åŒæ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†ï¼‰
select e.employee_id,d.department_name
from employees e join departments d
on e.department_id = d.department_id;

# å·¦ä¸Šå›¾ï¼šå·¦å¤–è¿æ¥
select e.employee_id,d.department_name
from employees e left join departments d
                   on e.department_id = d.department_id;

# å³ä¸Šå›¾ï¼šå³å¤–è¿æ¥
select e.employee_id,d.department_name
from employees e right join departments d
                    on d.department_id = e.department_id;

# å·¦ä¸­å›¾
select e.employee_id,d.department_name
from employees e left join departments d
on e.department_id=d.department_id
where d.department_id is NULL;

#å³ä¸­å›¾
select e.employee_id,d.department_name from
employees e right join departments d
on e.department_id = d.department_id
where e.department_id is null;

# å·¦ä¸‹å›¾ï¼šæ»¡å¤–é“¾æ¥
# å®ç°æ»¡å¤–é“¾æ¥æŸ¥è¯¢
#  æ–¹æ³•ä¸€ï¼š ä½¿ç”¨ å·¦ä¸Šå›¾å’Œå³ä¸­å›¾ï¼Œè¿›è¡ŒUNIN ALL åˆå¹¶ç»“æœé›†ï¼Œå¹¶ç»™è¿™ä¸¤ä¸ªå›¾æ²¡æœ‰é‡å¤éƒ¨åˆ†ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨UNIN ALL ä¸ç”¨å»é‡æ“ä½œï¼Œæ•ˆç‡è¿˜å¿«
select e.employee_id,d.department_name from
employees e
left join departments d
on e.department_id=d.department_id # (å·¦å¤–è¿æ¥)
UNION ALL
select e.employee_id,d.department_name
from employees e right join departments d
    on d.department_id = e.department_id
where e.department_id is null ;

# æ–¹æ³•äºŒï¼š
# å·¦ä¸­å›¾å’Œå³ä¸Šå›¾ åˆå¹¶
select e.last_name, e.manager_id, e.department_id, d.department_name, d.department_id
from employees e
         left join departments d
                   on e.employee_id = d.manager_id # å·¦å¤–è¿æ¥ å»é™¤ç»“æœä¸­åŒ¹é…çš„è¡Œï¼Œåªå‰©ä¸‹ä¸€ä¸ªä¸åŒ¹é…çš„
where e.department_id is null
UNION ALL# åˆå¹¶ç»“æœé›†
select e.last_name, e.manager_id, e.department_id, d.department_name, d.department_id
from employees e
         right join departments d
                    on e.department_id = d.department_id;# å³å¤–è¿æ¥ï¼Œå¾—åˆ°æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰è¡Œï¼Œä»¥åŠå³è¡¨çš„æ‰€æœ‰æ•°æ®

# ä¸Šé¢ä¸¤ä¸ªç»“æœåŠåˆå¹¶ï¼Œæ­£å¥½æ˜¯æ»¡å¤–é“¾æ¥ã€‚ä¸Šé¢ä¸¤ä¸ªç»“æœé›†ï¼Œä¸å­˜åœ¨é‡å¤çš„æ•°æ®ï¼Œç›´æ¥ä½¿ç”¨UNION ALL å°±å¯ä»¥è¿˜æå‡æ•ˆç‡




# å³ä¸‹å›¾ï¼šæ»¡å¤–é“¾æ¥ï¼Œå»é™¤ æ»¡è¶³æ¡ä»¶çš„ä¸­é—´å…¬å…±éƒ¨åˆ†
# ä½¿ç”¨å·¦ä¸­å›¾å’Œå³ä¸­å›¾è¿›è¡Œåˆå¹¶ UNION ALL
select e.employee_id,d.department_name from employees e
left join departments d
on e.department_id=d.department_id
where e.department_id is null
UNION ALL
select e.employee_id,d.department_name from employees e
right join departments d
on d.department_id=e.department_id
where e.department_id is null ;
```

## æ³¨æ„:

æˆ‘ä»¬è¦ æ§åˆ¶è¿æ¥è¡¨çš„æ•°é‡ ã€‚å¤šè¡¨è¿æ¥å°±ç›¸å½“äºåµŒå¥— for å¾ªç¯ä¸€æ ·,éå¸¸æ¶ˆè€—èµ„æº,ä¼šè®© SQL æŸ¥è¯¢æ€§èƒ½ä¸‹
é™å¾—å¾ˆä¸¥é‡,å› æ­¤ä¸è¦è¿æ¥ä¸å¿…è¦çš„è¡¨ã€‚åœ¨è®¸å¤š DBMS ä¸­,ä¹Ÿéƒ½ä¼šæœ‰æœ€å¤§è¿æ¥è¡¨çš„é™åˆ¶ã€‚

> ã€å¼ºåˆ¶ã€‘è¶…è¿‡ä¸‰ä¸ªè¡¨ç¦æ­¢ joinã€‚éœ€è¦ join çš„å­—æ®µ,æ•°æ®ç±»å‹ä¿æŒç»å¯¹ä¸€è‡´;å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶, ä¿
> è¯è¢«å…³è”çš„å­—æ®µéœ€è¦æœ‰ç´¢å¼•ã€‚
> è¯´æ˜:å³ä½¿åŒè¡¨ join ä¹Ÿè¦æ³¨æ„è¡¨ç´¢å¼•ã€SQL æ€§èƒ½ã€‚
> æ¥æº:é˜¿é‡Œå·´å·´ã€ŠJavaå¼€å‘æ‰‹å†Œã€‹

## å¤šè¡¨æŸ¥è¯¢ç»ƒä¹ 

```mysql

/**
  # ç»ƒä¹ :
# 1.æ˜¾ç¤ºæ‰€æœ‰å‘˜å·¥çš„å§“å,éƒ¨é—¨å·å’Œéƒ¨é—¨åç§°ã€‚
# 2.æŸ¥è¯¢90å·éƒ¨é—¨å‘˜å·¥çš„job_idå’Œ90å·éƒ¨é—¨çš„location_id
# 3.é€‰æ‹©æ‰€æœ‰æœ‰å¥–é‡‘çš„å‘˜å·¥çš„ last_name , department_name , location_id , city
# 4.é€‰æ‹©cityåœ¨Torontoå·¥ä½œçš„å‘˜å·¥çš„ last_name , job_id , department_id , department_name
# 5.æŸ¥è¯¢å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨åç§°ã€éƒ¨é—¨åœ°å€ã€å§“åã€å·¥ä½œã€å·¥èµ„,å…¶ä¸­å‘˜å·¥æ‰€åœ¨éƒ¨é—¨çš„éƒ¨é—¨åç§°ä¸ºâ€™Executiveâ€™
# 6.é€‰æ‹©æŒ‡å®šå‘˜å·¥çš„å§“å,å‘˜å·¥å·,ä»¥åŠä»–çš„ç®¡ç†è€…çš„å§“åå’Œå‘˜å·¥å·,ç»“æœç±»ä¼¼äºä¸‹é¢çš„æ ¼å¼
# 7.æŸ¥è¯¢å“ªäº›éƒ¨é—¨æ²¡æœ‰å‘˜å·¥
# 8. æŸ¥è¯¢å“ªä¸ªåŸå¸‚æ²¡æœ‰éƒ¨é—¨
# 9. æŸ¥è¯¢éƒ¨é—¨åä¸º Sales æˆ– IT çš„å‘˜å·¥ä¿¡æ¯
 */

 # 1.æ˜¾ç¤ºæ‰€æœ‰å‘˜å·¥çš„å§“å,éƒ¨é—¨å·å’Œéƒ¨é—¨åç§°ã€‚
# æ³¨æ„è¿™é‡Œæ˜¯æ‰€æœ‰å‘˜å·¥,å°±è¦æ±‚ å‘˜å·¥è¡¨çš„æ‰€æœ‰æ•°æ®éƒ½æ˜¾ç¤ºå‡ºæ¥

select * from employees;
select * from departments;

select e.last_name,e.department_id,d.department_name
from employees e left join departments d
on e.department_id=d.department_id;


# å·¥ä½œèŒä½ç­‰çº§,æœ€ä½æœ€é«˜å·¥èµ„
select * from job_grades;
# å·¥ä½œæ—¶é—´è®°å½• å…¥èŒæ—¶é—´,ç¦»èŒæ—¶é—´
select * from job_history;
# å·¥ä½œè¡¨ å·¥ä½œåç§° æœ€é«˜å·¥èµ„,æœ€ä½å·¥èµ„
select * from jobs;
#å®é™…ä½å€è¡¨
select * from locations;


# 2.æŸ¥è¯¢ 90å·éƒ¨é—¨  å‘˜å·¥çš„job_idå’Œ90å·éƒ¨é—¨çš„location_id
# æ€è·¯  å†…è¿æ¥ å‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨,æ‰¾åˆ°æ‰€æœ‰å‘˜å·¥å­˜åœ¨éƒ¨é—¨çš„æ•°æ®é›†
# å‘˜å·¥è¡¨ä¸­æœ‰ éƒ¨é—¨id, éƒ¨é—¨è¡¨ departments ä¸­ æœ‰ location_id åœ°å€id

select e.job_id,d.location_id
from departments d join employees e
on d.department_id=e.department_id
where d.department_id=90;


# 3.æŸ¥è¯¢æ‰€æœ‰ æœ‰å¥–é‡‘çš„å‘˜å·¥çš„ last_name , department_name , location_id , city
# è¿™é‡Œé¢ æœ‰ä¸ªäºº,æœ‰å¥–é‡‘,ä½†æ˜¯æ²¡æœ‰éƒ¨é—¨,ä¹Ÿè¦æ˜¾ç¤ºå‡ºæ¥,å¯¹åº”ä¹Ÿæ²¡æœ‰åŸå¸‚,ä¹Ÿè¦æ˜¾ç¤ºå‡ºæ¥
# æ‰€ä»¥éƒ½æ˜¯å·¦å¤–è¿æ¥
select e.last_name,d.department_name,l.location_id,l.city
from employees e
left join departments d
on e.department_id=d.department_id
left join locations l
on d.location_id=l.location_id
where e.commission_pct is not null ;

#4.é€‰æ‹©cityåœ¨Toronto å·¥ä½œçš„å‘˜å·¥çš„ last_name , job_id , department_id , department_name

select e.last_name,e.job_id,e.department_id,d.department_name
from employees e  join departments d
on e.department_id=d.department_id
 join locations l
    on d.location_id = l.location_id
where l.city='Toronto';

# æ€»ç»“: å†™å¤šè¡¨è”æŸ¥çš„æ—¶å€™,å…ˆçœ‹å­—æ®µæ¥è‡ªäºå“ªäº›è¡¨,å†çœ‹è¡¨ä¸è¡¨ä¹‹é—´ç”¨ä»€ä¹ˆå­—æ®µè¿æ¥, å…ˆç›´æ¥å†™join on è¿æ¥,å†™å®Œåå†è€ƒè™‘æ˜¯å¤–è¿æ¥è¿˜æ˜¯å†…è¿æ¥;

# 5.æŸ¥è¯¢å‘˜å·¥æ‰€åœ¨çš„ éƒ¨é—¨åç§°ã€éƒ¨é—¨åœ°å€ã€å§“åã€å·¥ä½œã€å·¥èµ„, å…¶ä¸­å‘˜å·¥æ‰€åœ¨éƒ¨é—¨çš„éƒ¨é—¨åç§°ä¸ºâ€™Executiveâ€™

select d.department_name,l.street_address,e.last_name,e.job_id,e.salary
from departments d join employees e
 on d.department_id = e.department_id
join locations l on d.location_id = l.location_id
where d.department_name='Executive';


# 6.é€‰æ‹© æŒ‡å®šå‘˜å·¥ çš„å§“å,å‘˜å·¥å·,ä»¥åŠä»–çš„ç®¡ç†è€…çš„å§“åå’Œå‘˜å·¥å·,ç»“æœç±»ä¼¼äºä¸‹é¢çš„æ ¼å¼
# employees  Emp # manager Mgr#
# kochhar  101  king  100
select * from employees;
# å‘˜å·¥è¡¨çš„è‡ªè¿æ¥
select Emp.last_name,Emp.employee_id,Mgr.last_name,Mgr.employee_id
from employees Emp left join  employees Mgr
on Emp.manager_id=Mgr.employee_id;

# 7.æŸ¥è¯¢å“ªäº›éƒ¨é—¨æ²¡æœ‰å‘˜å·¥
select * from employees e right join departments d on e.department_id = d.department_id
where e.employee_id is null;
# 8. æŸ¥è¯¢å“ªä¸ªåŸå¸‚æ²¡æœ‰éƒ¨é—¨
desc locations;
desc departments;

select l.city,d.location_id
from departments d right join locations l on d.location_id = l.location_id
where d.location_id is  null;

# ä»from åé¢ å¼€å§‹è¯»,departments éƒ¨é—¨è¡¨å’Œ locations åœ°å€è¡¨ è¿æ¥
# (on åé¢çš„æ¡ä»¶ å¯å…ˆæƒ³ä¸¤ä¸ªè¡¨ä¹‹é—´æ˜¯ å¤šå¯¹å¤š è¿˜æ˜¯ 1å¯¹å¤š,å¦‚ä¸Š éƒ¨é—¨å¯ä»¥å­˜åœ¨ å¤šä¸ª åŸå¸‚ä¸­,onåé¢æ˜¯å–éƒ¨é—¨åœ¨è¿™ä¸ªåŸå¸‚çš„è¡Œ, éƒ¨é—¨ä¹Ÿå¯ä»¥ä¸åœ¨è¿™ä¸ªåŸå¸‚ éƒ¨é—¨çš„locationidä¹Ÿå¯ä»¥æ˜¯null å¦‚æœæ˜¯left join è¡¨ç¤º éƒ¨é—¨ä¸å­˜åœ¨åŸå¸‚ä¸­çš„å€¼ä¹Ÿè¦ )
# on åé¢çš„æ„æ€æ˜¯
# éƒ¨é—¨è¡¨ä¸­ æœ‰ location_id åœ°å€id çš„æ•°æ®å…¨éƒ¨å–å‡ºæ¥.
# å¦‚æœ éƒ¨é—¨è¡¨ä¸­çš„æŸä¸€è¡Œä¸­çš„ åœ°å€id æ˜¯null è¿™ä¸ªéƒ¨é—¨æ²¡æœ‰å¯¹åº”çš„åŸå¸‚

# åä¹‹: join  è¡¨ç¤º location è¡¨ä¸­çš„ éƒ¨é—¨å­˜åœ¨çš„æ•°æ® å…¨éƒ¨å–å‡ºæ¥
#      right join  è¡¨ç¤ºåœ°å€è¡¨ location è¡¨ çš„æ‰€æœ‰æ•°æ®å–å‡ºæ¥,åŒ…æ‹¬æœ‰åŸå¸‚,ä¸å­˜åœ¨éƒ¨é—¨,éƒ¨é—¨idä¸ºnullçš„æ•°æ®ä¹Ÿå–å‡ºæ¥.
# where d.location_id is  null; è¡¨ç¤ºäº¤è¡¨åç»“æœé›†å–å‡º,éƒ¨é—¨æ˜¯nullçš„æ•°æ®,å°±æ˜¯åŸå¸‚æ²¡æœ‰éƒ¨é—¨çš„æ•°æ®


select * from locations;

# 9. æŸ¥è¯¢  éƒ¨é—¨åä¸º Sales æˆ– IT çš„ å‘˜å·¥ä¿¡æ¯
select e.last_name,d.department_name
from employees e join departments d on e.department_id=d.department_id
where d.department_name in ('Sales','IT');


```



## ç»ƒä¹  äºŒ

```mysql
 #1.æ‰€æœ‰æœ‰é—¨æ´¾çš„äººå‘˜ä¿¡æ¯
#     ( Aã€Bä¸¤è¡¨å…±æœ‰)
select * from t_dept;# é—¨æ´¾è¡¨

select * from t_emp;# äººå‘˜è¡¨

select * from
t_dept d left join t_emp e
on d.id=e.deptId;

# on åé¢ è¯»ä½œ é—¨æ´¾ä¸­æœ‰ äºº çš„æ•°æ® å–å‡ºæ¥.
# é¢˜ç›®ä¸­è¦æ±‚æ‰€æœ‰é—¨æ´¾,é‚£ä¹ˆé—¨æ´¾ä¸­ä¹Ÿå¯èƒ½æ²¡æœ‰äºº,æ‰€ä»¥ä½¿ç”¨çš„æ˜¯ left join å·¦å¤–è¿æ¥, å°†æ‰€æœ‰é—¨æ´¾ç»™å–å‡ºæ¥.
# é—¨æ´¾ä¸­æœ‰äºº,é—¨æ´¾ä¸­æ²¡äººéƒ½å–å‡ºæ¥
```























---


----

Â© ç‰ˆæƒå£°æ˜

<escape>

<div>
    <h3 align="center"  style="color: brown;" >ç‰ˆæƒå£°æ˜</h3>
    <table>
   		<tr>
    		<ol>
				<li>æœ¬ç½‘ç«™åç§°ï¼šğš²ğš³ğš²</li>
				<li>ğš²ğš³ğš²æä¾›çš„èµ„æºä»…ä¾›æ‚¨ä¸ªäººç”¨äºéå•†ä¸šæ€§ç›®çš„ã€‚</li>
				<li>æœ¬ç«™æ–‡ç« éƒ¨åˆ†å†…å®¹å¯èƒ½æ¥æºäºç½‘ç»œï¼Œä»…ä¾›å¤§å®¶å­¦ä¹ ä¸å‚è€ƒï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»æˆ‘è¿›è¡Œåˆ é™¤å¤„ç†ã€‚</li>
				<li>æœ¬ç«™ä¸€åˆ‡èµ„æºä¸ä»£è¡¨æœ¬ç«™ç«‹åœºï¼Œå¹¶ä¸ä»£è¡¨æœ¬ç«™èµåŒå…¶è§‚ç‚¹å’Œå¯¹å…¶çœŸå®æ€§è´Ÿè´£ã€‚</li>
        		<li>æœ¬ç«™ä¸€å¾‹ç¦æ­¢ä»¥ä»»ä½•æ–¹å¼å‘å¸ƒæˆ–è½¬è½½ä»»ä½•è¿æ³•çš„ç›¸å…³ä¿¡æ¯ï¼Œè®¿å®¢å‘ç°è¯·ä¸¾æŠ¥</li> 
        		<li>æœ¬ç«™èµ„æºå¤§å¤šå­˜å‚¨åœ¨äº‘ç›˜ï¼Œå¦‚å‘ç°é“¾æ¥å¤±æ•ˆï¼Œè¯·è”ç³»æˆ‘ï¼Œæˆ‘ä¼šç¬¬ä¸€æ—¶é—´æ›´æ–°ã€‚</li>
        		<li>æœ¬ç«™å¼ºçƒˆæ‰“å‡»ç›—ç‰ˆ/ç ´è§£ç­‰æœ‰æŸä»–äººæƒç›Šå’Œè¿æ³•ä½œä¸ºï¼Œè¯·æ”¯æŒæ­£ç‰ˆï¼</li>  
			</ol>
		</tr>
	</table>
</div>





</escape>

----



