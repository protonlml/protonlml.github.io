---
title: 3.mysql第6章多表联合查询.md
date: 2019-10-03 10:00:00
author: 𝚲𝚳𝚲
tags:   # 添加博文标签
	- mysql8.0.22
categories:   # 添加博文分类
	- mysql8.0.22


---

<h1><center>多表联合查询.md</center></h1>

```mysql
/**
  第六章：多表联查
        在现实情况中，查询字段不在同一张表中，就需要多张表进行联合查询
        多表联查，需要有 连接条件
  注意：在多表联查的时候，多张表请务必取别名，使用别名，指定字段是哪个表中的，这样提高查询的速度

  sql 的执行顺序是：
        1.先执行from 挑出表
            from 表1，表2.(挑出这两个表来)
        2.执行where 筛选条件，以及后面的语句
            where 筛选条件
            order by
            limit 0,10;
        3.最后挑选出需要的字段
            select 指定字段
  所以在from 后面给表起了别名，就会覆盖原表名，在后续的order by ...等等的语句中，必须使用表的别名来指定
 */

## 查询员工表
select * from employees;
## 查询部门表
select * from departments;


/**
   sql  99版本的写法
        多表联查
        两个 交表，又叫两个表联查
    多表查询的分类
        角度1： 等值连接 vs 非等值连接
        角度2： 自连接 vs 非自连接
        角度3： 内连接 VS 外连接
 */

## 将 员工表和部门表进行联合查询
## 这种92写法 不用
## 等值连接
select *
from employees e,departments d
where e.department_id=d.department_id;

## 非等值连接
select * from employees e ,  job_grades jg
where e.salary between jg.lowest_sal and jg.highest_sal;

/**
  自连接 VS 非自连接
    表：表，自己连接自己
 */
# 自连接，练习：查询员工id 员工姓名 及其管理者id以及姓名
# 思路：管理者也是员工，员工表自己连接自己，将一张表看作是 员工表，另一张表看作是 管理者表
# 内连接：使用 join  on  (取两个表交集的结果，满足on 条件的所有结果)
# 得到的结果是 满足on 后面的 条件的
select e.employee_id ,e.last_name,e.manager_id,gl.employee_id,gl.last_name,gl.manager_id from
employees e join employees gl
on e.employee_id=gl.manager_id
order by e.salary desc ;



/**
  内连接vs外连接

  内连接：合并具有同一列的两个以上的表的行，结果集中 不包含一个表与另一个表不匹配的行
  外连接：合并具有同一列的两个以上的表的行,结果集中除了包含一个表与另一个表匹配的行之外,还查询到了左表或右表中不匹配的行。
            左外连接：查询的结果集中，包含左表的所有值(左表中不匹配的行,也会存在)，以及on后面条件，两个表之间匹配的行
            右外连接：查询的结果集中，包含右表的所有值(右表中不匹配的行,也会存在)，以及on后面条件，两个表之间匹配的行
            满外连接：左表，右表所有的匹配的行取出来，也包括有 左表不匹配的行，以及右表不匹配的行。
    左外连接:两个表在连接过程中除了返回满足连接条件的行以外，还返回左表中不满足条件的行。
    右外连接:两个表在连接过程中除了返回满足连接条件的行以外，还返回右表中不满足条件的行。
 */
/**
  内连接
   employees员工表107行数据。 departments是 部门表
  # 下面语句结果集有106行，因为employees员工表中有一个人的 department_id为null 它没有部门，所以结果中没有它
    # 其他所有人都有 department_id ，所有人都有部门。所以结果 106条（取两表匹配的行组成结果集，取交集）
  练习：查询员工 last name 姓名 ,department_name部门姓名 信息（这里面是查询员工的，部门信息，有的员工没有存在任何一个部门那么结果就不返回，这里是内连接取交集）
 */
select *
from employees e  join departments d on e.department_id=d.department_id;

/**
  employees员工表107行数据。 departments是 部门表
   练习：查询所有的员工 last name 姓名 ,department_name部门姓名 信息
  （这里面是查询所有员工的，部门信息，即使员工不存在部门，员工信息也要返回，所以是 左外连接 查询，查询结果是 所有员工匹配所有部门的行，以及包括不存在部门的员工信息行也在结果集中）
# 左外连接
# 结果是 左表所有值，以及 满足条件的交集值
# 结果107行，虽然employees员工表中King的 department_id为null 它没有部门，但是这个left join 左表所有员工都展示出来，交表部分没有值就null 着
#                                                                               department_id
# 178,Kimberely,Grant,KGRANT,011.44.1644.429263,1999-05-24,SA_REP,7000,0.15,149,    null,       null,null,null,

 */
select *
from employees e left join departments d on e.department_id=d.department_id;


/**
  满外连接
   mysql 不支持满外连接 FULL JOIN ON
 */





```







---


----

© 版权声明

<escape>

<div>
    <h3 align="center"  style="color: brown;" >版权声明</h3>
    <table>
   		<tr>
    		<ol>
				<li>本网站名称：𝚲𝚳𝚲</li>
				<li>𝚲𝚳𝚲提供的资源仅供您个人用于非商业性目的。</li>
				<li>本站文章部分内容可能来源于网络，仅供大家学习与参考，如有侵权，请联系我进行删除处理。</li>
				<li>本站一切资源不代表本站立场，并不代表本站赞同其观点和对其真实性负责。</li>
        		<li>本站一律禁止以任何方式发布或转载任何违法的相关信息，访客发现请举报</li> 
        		<li>本站资源大多存储在云盘，如发现链接失效，请联系我，我会第一时间更新。</li>
        		<li>本站强烈打击盗版/破解等有损他人权益和违法作为，请支持正版！</li>  
			</ol>
		</tr>
	</table>
</div>





</escape>

----



