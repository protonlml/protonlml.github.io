---
title: 7.mysql第10章创建和管理（数据库与表）
date: 2019-10-03 15:00:00
author: 𝚲𝚳𝚲
tags:   # 添加博文标签
	- mysql8.0.22
categories:   # 添加博文分类
	- mysql8.0.22



---

<h1><center>创建和管理表</center></h1>



## 2.-创建和管理数据库

```mysql

/**
  数据库的创建，修改与删除.
 */

# 1.创建数据库
create database  test1 ;
# 2.:判断数据库是否已经存在,不存在则创建数据库( 推荐 ) 指定字符集
create database IF NOT EXISTS test2 character set utf8mb4;
# 3.查看所有数据库
show databases;
# 4.查看当前正在使用的数据库
select database();
# 使用指定数据库
use test2;
# 5. 查看指定数据库下面的所有表
show tables from atguigudb;
# 6.查看数据库的创建信息
show create database test2;

# 7.更改数据库字符集
alter database test2 character set gbk;

show create database test2;
# 8.删除指定数据库(不可逆)
drop database test2;
# 8.1 删除数据库，如果存在
drop database if exists test2;
```



### 1-.创建和管理表

```mysql


## ---------------------------------------------------------------

create database if not exists  test2 character set utf8mb4;
use test2;
show create database test2;

# 1.创建表（创建的是一张空白表，白手起家）
create table if not exists student (
    id int not null unique primary key , # 非空约束，唯一约束，主键约束
    name varchar(15) not null , # 非空约束
    age int not null ,
    gender enum('男','女'),
    identity  int not null unique
);

desc student;

delete from student;


# 2.插入数据
insert into student (id, name, age, gender, identity)
values (1,'小明',15,'男','413026185502654897');

insert into student (id, name, age, gender, identity)
values (2,'小绿',29,'女','4130265641502654897');

select * from student;



```

## 2-.创建一张表的两种方式

- 2.1

```mysql

#2.创建一张表，表数据从已知表数据获取（相当于复制表）
#2.1.复制一张表
CREATE TABLE stu1 AS SELECT * FROM student;

select * from stu1;

#2.2.创建的表，只有字段，没有值
CREATE TABLE stu2 AS SELECT * FROM student WHERE 1=2; -- 创建的emp2是空表

select * from stu2;

#2.3. 创建表，指定复制那几个字段，和数据
CREATE TABLE stu80
AS SELECT id, name, age, gender, identity FROM student WHERE id = 2;


select * from stu80;

DESCRIBE stu80;
```

## 3-.表的修改

```mysql

# 3. 修改table表的字段类型(修改一列)
alter table student
modify identity bigint;

alter table student
modify identity bigint default 111111111111111111;

# 4.追加一列
alter table student
add iphone int ;

desc student;

#5.重命名一个列
alter table student
change name student_name varchar(15);

#6.删除一个列
alter table student
drop column iphone;

# 7.查询表数据
select * from student;

# 8.重命名表
rename table student to students;

show tables ;

# 9.删除表
/**
在MySQL中,当一张数据表 没有与其他任何数据表形成关联关系 时,可以将当前数据表直接删除。
数据和结构都被删除
所有正在运行的相关事务被提交
所有相关索引被删除

  IF EXISTS 的含义为:如果当前数据库中存在相应的数据表,则删除数据表;如果当前数据库中不存
在相应的数据表,则忽略删除语句,不再执行删除数据表的操作。

 */


drop table if exists students;


# 10.清空表
# TRUNCATE TABLE detail_dept;
# TRUNCATE 删除表中的所有数据，且不能回滚

select *
from student;

desc student;


insert into student (id, name, age, gender, identity)
values (1,'夏红',25,'女',125442121244);

#修改字段类型
alter table student modify identity bigint;

#       创建表                    修改表           重命名表         删除表
# create table 表名         alter table 表名      rename table       drop table 表名


select * from student;

## -------------------------------------------
# 设置 自动提交关闭， delete 表 删除所有数据后，紧接着可以回滚到上一步。
SET autocommit = FALSE;
delete from student;
rollback ;
select * from student;

# 如果是TRUNCATE TABLE 截断表清空表数据，不管设不设置SET autocommit = FALSE; 都不能回滚。（开发最好别用）
truncate student;
select * from student;
rollback ;  # 即使是执行回滚，也不能回滚了。
select * from student;

/**
拓展2:如何理解清空表、删除表等操作需谨慎?!
表删除 操作将把表的定义和表中的数据一起删除,并且MySQL在执行删除操作时,不会有任何的确认信
息提示,因此执行删除操时应当慎重。在删除表前,最好对表中的数据进行 备份 ,这样当操作失误时可
以对数据进行恢复,以免造成无法挽回的后果。
同样的,在使用 ALTER TABLE 进行表的基本修改操作时,在执行操作过程之前,也应该确保对数据进
行完整的 备份 ,因为数据库的改变是 无法撤销 的,如果添加了一个不需要的字段,可以将其删除;相
同的,如果删除了一个需要的列,该列下面的所有数据都将会丢失。
 */
```



## 5-.注意：清空表、删除表等操作需谨慎!

**表删除 操作将把表的定义和表中的数据一起删除,并且MySQL在执行删除操作时,不会有任何的确认信
息提示,因此执行删除操时应当慎重。在删除表前,最好对表中的数据进行 备份 ,这样当操作失误时可
以对数据进行恢复,以免造成无法挽回的后果。
同样的,在使用 ALTER TABLE 进行表的基本修改操作时,在执行操作过程之前,也应该确保对数据进
行完整的 备份 ,因为数据库的改变是 无法撤销 的,如果添加了一个不需要的字段,可以将其删除;相
同的,如果删除了一个需要的列,该列下面的所有数据都将会丢失。**



## 练习

```mysql

#第10章_创建和管理表
# 练习1：
#1. 创建数据库test01_office,指明字符集为utf8。并在此数据库下执行下述操作

create database if not exists test01_office character set utf8mb4;

# 使用数据库
use test01_office;
#2. 创建表dept01
/*
字段
 类型
id
 INT(7)
NAME
 VARCHAR(25)
*/
create table if not exists dept01(
  id int primary key auto_increment,
  name varchar(25)
);

select * from dept01;

#3. 将表departments中的数据插入新表dept02中
create table if not exists dept02
    AS
select * from atguigudb.departments;

select * from dept02;
#4. 创建表emp01
/*
字段
 类型
id
 INT(7)
first_name
 VARCHAR (25)
last_name
 VARCHAR(25)
dept_id
 INT(7)
*/

create table if not exists emp01(
    id int(7) primary key auto_increment comment 'id',
    first_name varchar(25) not null comment '姓',
    last_name varchar(25) not null comment '名字',
    dept_id int(7) comment '部门id'
);

desc emp01;

#5. 将列last_name的长度增加到50
alter table emp01
modify last_name varchar(50) not null comment '名字';


#6. 根据表employees创建emp02
create table if not exists emp02
select * from atguigudb.employees
where 1=2;

#7. 删除表emp01

drop table emp01;

#8. 将表emp02重命名为emp01
alter table emp02 rename emp01;

#9.在表dept02和emp01中添加新列test_column,并检查所作的操作
alter table dept02
add test_column varchar(15);

alter table emp01
add test_column varchar(15);


#10.直接删除表emp01中的列 department_id
alter table emp01
drop column department_id;

select *
from emp01;

/**
  重命名表
  RENAME TABLE emp TO myemp;
 对于表中字段的操作
  添加一个列 add
  修改一个列字段的属性 modify
  重命名一个列的名称  change 改变
  删除一列 drop
 */

#练习2：
# 1、创建数据库 test02_market
create database if not exists test02_market character set utf8mb4;
use test02_market;
# 2、创建数据表 customers
create table if not exists customers(
    c_num int primary key auto_increment,
    c_name varchar(50) not null comment '姓名',
    c_contact varchar(50) ,
    c_city varchar(50) comment '城市',
    c_birth date comment '生日'
);
# 3、将 c_contact 字段移动到 c_birth 字段后面
alter table customers
modify c_contact varchar(50) after c_birth;

select * from customers;

# 4、将 c_name 字段数据类型改为 varchar(70)
alter table customers
modify c_name varchar(70);

desc customers;
# 5、将c_contact字段改名为c_phone
alter table customers
change  c_contact c_phone varchar(50);

desc customers;

# 6、增加c_gender字段到c_name后面,数据类型为char(1)
alter table customers
add c_gender char(1)  after c_name;

desc customers;

# 7、将表名改为customers_info
rename table customers to customers_info;

# 8、删除字段c_city
alter table customers_info
drop c_city;

desc customers_info;
# 练习3：
# 1、创建数据库test03_company
create database if not exists test03_company character set utf8mb4;
use test03_company;
# 2、创建表offices
create table if not exists offices(
    officeCode int primary key auto_increment,
    city varchar(30),
    address varchar(50),
    country varchar(50),
    postalCode varchar(25)
);
# 3、创建表employees
create table if not exists employees(
empNum int primary key auto_increment,
lastName varchar(50) not null comment '名字',
firstName varchar(50) not null comment '姓',
mobile varchar(25) unique not null comment '手机号',
code int unique comment  '代码',
jobTitle varchar(50) not null comment '工作名称',
birth date comment '生日',
note varchar(255) default '普通员工' comment '笔记',
sex varchar(5) not null comment '性别'
);
select * from employees;

desc employees;
# 4、将表employees的mobile字段修改到code字段后面
alter table employees
modify mobile varchar(50) after code;

desc employees;
# 5、将表employees的birth字段改名为birthday
alter table employees
change birth birthday date;

desc employees;
# 6、修改sex字段,数据类型为char(1)
alter table employees
modify sex char(1);

desc employees;
# 7、删除字段note
alter table employees
drop note;

desc employees;
# 8、增加字段名favoriate_activity,数据类型为varchar(100)
alter table employees
add favoriate_activity varchar(100) comment '喜欢的活动';

# 9、将表employees的名称修改为 employees_info
rename table employees to employees_info;

```





---


----

© 版权声明

<escape>

<div>
    <h3 align="center"  style="color: brown;" >版权声明</h3>
    <table>
   		<tr>
    		<ol>
				<li>本网站名称：𝚲𝚳𝚲</li>
				<li>𝚲𝚳𝚲提供的资源仅供您个人用于非商业性目的。</li>
				<li>本站文章部分内容可能来源于网络，仅供大家学习与参考，如有侵权，请联系我进行删除处理。</li>
				<li>本站一切资源不代表本站立场，并不代表本站赞同其观点和对其真实性负责。</li>
        		<li>本站一律禁止以任何方式发布或转载任何违法的相关信息，访客发现请举报</li> 
        		<li>本站资源大多存储在云盘，如发现链接失效，请联系我，我会第一时间更新。</li>
        		<li>本站强烈打击盗版/破解等有损他人权益和违法作为，请支持正版！</li>  
			</ol>
		</tr>
	</table>
</div>





</escape>

----









