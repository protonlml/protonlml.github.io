---
title: 0.Docker中安装mysql8.0.22
date: 2019-10-01 01:00:00
author: 𝚲𝚳𝚲
tags:   # 添加博文标签
	- mysql8.0.22
categories:   # 添加博文分类
	- mysql8.0.22
---

<h1><center>Docker中安装mysql8.0.22</center></h1>

## 一、下载安装

- 第一步：在[hub.docker.com](https://hub.docker.com/)上搜索mysql镜像

![image-20240722230703225](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407222307366.png)

- 第二步：拉取指定版本的mysql

![image-20240722231036347](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407222310929.png)

- 也可以指定拉取版本

```java
sudo docker pull mysql:8.0.22
```

- 第三步：检查mysql镜像

```java
sudo docker images
```

- 第四步：启动运行mysql镜像 (docker run 用于启动一个容器)

```java
docker run -p 3310:3306 --name mysql8 \
-v /usr/local/docker/mysql8/mysql-files:/var/lib/mysql-files \
-v /usr/local/docker/mysql8/conf:/etc/mysql/conf.d \
-v /usr/local/docker/mysql8/logs:/var/log/mysql \
-v /usr/local/docker/mysql8/data:/var/lib/mysql \
-e MYSQL_ROOT_PASSWORD=PCfan0906. \
-d mysql:8.0.22
```

- 第四步解释

  - 将端口号映射为3310

  - 容器名字为 mysql8
  - -v 表示挂载的卷，conf,logs,data都挂在到主机中
  - 修改登陆密码：PCfan0906.（默认是root   最好是修改个密码，要不然后面使用Navacat连接会有问题）
  - -d 启动mysql:8.0.22

- 假如安装过程中失败了，则可通过docker ps -a 查看以前的容器，假如已存在，则通过docker rm 镜像id 删除再重新安装即可。

- 第五步：停止mysql8服务（可选）

- 执行完第四个步骤（启动运行mysql镜像），mysql就会自动启动了，假如需要停止这个

  服务可以执行：

```java
docker stop mysql8
```

- 第六步：启动mysql服务
- 假如mysql8服务没有启动运行，但是mysql8容器是存在的，可以通过如下方式启动mysql8。

```java
docker start mysql8
```

- 假如希望查看mysql8启动时的日志，可以执行 docker container logs mysql8 这个指令
- 第七步：查看docker启动的服务

```java
docker ps
```

- 第八步：进入容器 (退出容器用exit)

```java
sudo docker exec -it mysql8 bash
```

- 第九步：登陆(默认密码root)，一定要先进入mysql容器。

```java
mysql -uroot -pPCfan0906.
```

- 第十步：设置mysql开机自启动（可选）

```java
docker update mysql8 --restart=always
```

- 如何重启mysql服务？

```java
docker restart mysql8
```

- 查看MySQL安装到哪了?

```java
whereis mysql8
```



---



----

## 二、连接MySQL时要注意

- 第一步：关闭linux宿主机的防火墙 (假如直击连接),命令忘了可以通过搜索引擎查。

```java
sudo systemctl stop firewalld.service
```



- 第二步：重启docker

```java
sudo systemctl restart docker
```



- 第三步：启动mysql

```java
docker start mysql8
```





---



---



## 三、Navacat连接MySQL

连接mysql如果遇到以下问题可以这样解决

问题描述：

```java
1251-client does not support authentication protocol requesred by server;consider upgrading MySQL Client
```

![image-20240722235822575](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407222358806.png)



解决办法：

（1）mysql容器内部

```java
sudo docker exec -it mysql8 bash
```

（2）进入mysql

```java
mysql -uroot -pPCfan0906.
```

输入密码 PCfan0906.

（3）查看用户信息

```java
select host,user,plugin,authentication_string from mysql.user; 
```

![image-20240723000356219](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407230003245.png)

备注：host为 % 表示不限制ip localhost表示本机使用 plugin非mysql_native_password 则需要修改密码

（5）修改用户密码

```java
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456'; 
```

（6）更新user为root，host为% 的密码为123456

```java
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456'; 
```

更新user为root，host为localhost 的密码为123456

7）再次连接即可成功 









---


----

© 版权声明

<escape>

<div>
    <h3 align="center"  style="color: brown;" >版权声明</h3>
    <table>
   		<tr>
    		<ol>
				<li>本网站名称：𝚲𝚳𝚲</li>
				<li>𝚲𝚳𝚲提供的资源仅供您个人用于非商业性目的。</li>
				<li>本站文章部分内容可能来源于网络，仅供大家学习与参考，如有侵权，请联系我进行删除处理。</li>
				<li>本站一切资源不代表本站立场，并不代表本站赞同其观点和对其真实性负责。</li>
        		<li>本站一律禁止以任何方式发布或转载任何违法的相关信息，访客发现请举报</li> 
        		<li>本站资源大多存储在云盘，如发现链接失效，请联系我，我会第一时间更新。</li>
        		<li>本站强烈打击盗版/破解等有损他人权益和违法作为，请支持正版！</li>  
			</ol>
		</tr>
	</table>
</div>



</escape>

----



