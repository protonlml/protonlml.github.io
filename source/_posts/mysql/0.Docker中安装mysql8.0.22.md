---
title: 0.Dockerä¸­å®‰è£…mysql8.0.22
date: 2019-10-01 01:00:00
author: ğš²ğš³ğš²
tags:   # æ·»åŠ åšæ–‡æ ‡ç­¾
	- mysql8.0.22
categories:   # æ·»åŠ åšæ–‡åˆ†ç±»
	- mysql8.0.22
---

<h1><center>Dockerä¸­å®‰è£…mysql8.0.22</center></h1>

## ä¸€ã€ä¸‹è½½å®‰è£…

- ç¬¬ä¸€æ­¥ï¼šåœ¨[hub.docker.com](https://hub.docker.com/)ä¸Šæœç´¢mysqlé•œåƒ

![image-20240722230703225](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407222307366.png)

- ç¬¬äºŒæ­¥ï¼šæ‹‰å–æŒ‡å®šç‰ˆæœ¬çš„mysql

![image-20240722231036347](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407222310929.png)

- ä¹Ÿå¯ä»¥æŒ‡å®šæ‹‰å–ç‰ˆæœ¬

```java
sudo docker pull mysql:8.0.22
```

- ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥mysqlé•œåƒ

```java
sudo docker images
```

- ç¬¬å››æ­¥ï¼šå¯åŠ¨è¿è¡Œmysqlé•œåƒ (docker run ç”¨äºå¯åŠ¨ä¸€ä¸ªå®¹å™¨)

```java
docker run -p 3310:3306 --name mysql8 \
-v /usr/local/docker/mysql8/mysql-files:/var/lib/mysql-files \
-v /usr/local/docker/mysql8/conf:/etc/mysql/conf.d \
-v /usr/local/docker/mysql8/logs:/var/log/mysql \
-v /usr/local/docker/mysql8/data:/var/lib/mysql \
-e MYSQL_ROOT_PASSWORD=PCfan0906. \
-d mysql:8.0.22
```

- ç¬¬å››æ­¥è§£é‡Š

  - å°†ç«¯å£å·æ˜ å°„ä¸º3310

  - å®¹å™¨åå­—ä¸º mysql8
  - -v è¡¨ç¤ºæŒ‚è½½çš„å·ï¼Œconf,logs,dataéƒ½æŒ‚åœ¨åˆ°ä¸»æœºä¸­
  - ä¿®æ”¹ç™»é™†å¯†ç ï¼šPCfan0906.ï¼ˆé»˜è®¤æ˜¯root   æœ€å¥½æ˜¯ä¿®æ”¹ä¸ªå¯†ç ï¼Œè¦ä¸ç„¶åé¢ä½¿ç”¨Navacatè¿æ¥ä¼šæœ‰é—®é¢˜ï¼‰
  - -d å¯åŠ¨mysql:8.0.22

- å‡å¦‚å®‰è£…è¿‡ç¨‹ä¸­å¤±è´¥äº†ï¼Œåˆ™å¯é€šè¿‡docker ps -a æŸ¥çœ‹ä»¥å‰çš„å®¹å™¨ï¼Œå‡å¦‚å·²å­˜åœ¨ï¼Œåˆ™é€šè¿‡docker rm é•œåƒid åˆ é™¤å†é‡æ–°å®‰è£…å³å¯ã€‚

- ç¬¬äº”æ­¥ï¼šåœæ­¢mysql8æœåŠ¡ï¼ˆå¯é€‰ï¼‰

- æ‰§è¡Œå®Œç¬¬å››ä¸ªæ­¥éª¤ï¼ˆå¯åŠ¨è¿è¡Œmysqlé•œåƒï¼‰ï¼Œmysqlå°±ä¼šè‡ªåŠ¨å¯åŠ¨äº†ï¼Œå‡å¦‚éœ€è¦åœæ­¢è¿™ä¸ª

  æœåŠ¡å¯ä»¥æ‰§è¡Œï¼š

```java
docker stop mysql8
```

- ç¬¬å…­æ­¥ï¼šå¯åŠ¨mysqlæœåŠ¡
- å‡å¦‚mysql8æœåŠ¡æ²¡æœ‰å¯åŠ¨è¿è¡Œï¼Œä½†æ˜¯mysql8å®¹å™¨æ˜¯å­˜åœ¨çš„ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å¯åŠ¨mysql8ã€‚

```java
docker start mysql8
```

- å‡å¦‚å¸Œæœ›æŸ¥çœ‹mysql8å¯åŠ¨æ—¶çš„æ—¥å¿—ï¼Œå¯ä»¥æ‰§è¡Œ docker container logs mysql8 è¿™ä¸ªæŒ‡ä»¤
- ç¬¬ä¸ƒæ­¥ï¼šæŸ¥çœ‹dockerå¯åŠ¨çš„æœåŠ¡

```java
docker ps
```

- ç¬¬å…«æ­¥ï¼šè¿›å…¥å®¹å™¨ (é€€å‡ºå®¹å™¨ç”¨exit)

```java
sudo docker exec -it mysql8 bash
```

- ç¬¬ä¹æ­¥ï¼šç™»é™†(é»˜è®¤å¯†ç root)ï¼Œä¸€å®šè¦å…ˆè¿›å…¥mysqlå®¹å™¨ã€‚

```java
mysql -uroot -pPCfan0906.
```

- ç¬¬åæ­¥ï¼šè®¾ç½®mysqlå¼€æœºè‡ªå¯åŠ¨ï¼ˆå¯é€‰ï¼‰

```java
docker update mysql8 --restart=always
```

- å¦‚ä½•é‡å¯mysqlæœåŠ¡ï¼Ÿ

```java
docker restart mysql8
```

- æŸ¥çœ‹MySQLå®‰è£…åˆ°å“ªäº†?

```java
whereis mysql8
```



---



----

## äºŒã€è¿æ¥MySQLæ—¶è¦æ³¨æ„

- ç¬¬ä¸€æ­¥ï¼šå…³é—­linuxå®¿ä¸»æœºçš„é˜²ç«å¢™ (å‡å¦‚ç›´å‡»è¿æ¥),å‘½ä»¤å¿˜äº†å¯ä»¥é€šè¿‡æœç´¢å¼•æ“æŸ¥ã€‚

```java
sudo systemctl stop firewalld.service
```



- ç¬¬äºŒæ­¥ï¼šé‡å¯docker

```java
sudo systemctl restart docker
```



- ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨mysql

```java
docker start mysql8
```





---



---



## ä¸‰ã€Navacatè¿æ¥MySQL

è¿æ¥mysqlå¦‚æœé‡åˆ°ä»¥ä¸‹é—®é¢˜å¯ä»¥è¿™æ ·è§£å†³

é—®é¢˜æè¿°ï¼š

```java
1251-client does not support authentication protocol requesred by server;consider upgrading MySQL Client
```

![image-20240722235822575](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407222358806.png)



è§£å†³åŠæ³•ï¼š

ï¼ˆ1ï¼‰mysqlå®¹å™¨å†…éƒ¨

```java
sudo docker exec -it mysql8 bash
```

ï¼ˆ2ï¼‰è¿›å…¥mysql

```java
mysql -uroot -pPCfan0906.
```

è¾“å…¥å¯†ç  PCfan0906.

ï¼ˆ3ï¼‰æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯

```java
select host,user,plugin,authentication_string from mysql.user; 
```

![image-20240723000356219](https://raw.githubusercontent.com/protonlml/blogimages/master/imgs/202407230003245.png)

å¤‡æ³¨ï¼šhostä¸º % è¡¨ç¤ºä¸é™åˆ¶ip localhostè¡¨ç¤ºæœ¬æœºä½¿ç”¨ pluginémysql_native_password åˆ™éœ€è¦ä¿®æ”¹å¯†ç 

ï¼ˆ5ï¼‰ä¿®æ”¹ç”¨æˆ·å¯†ç 

```java
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456'; 
```

ï¼ˆ6ï¼‰æ›´æ–°userä¸ºrootï¼Œhostä¸º% çš„å¯†ç ä¸º123456

```java
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456'; 
```

æ›´æ–°userä¸ºrootï¼Œhostä¸ºlocalhost çš„å¯†ç ä¸º123456

7ï¼‰å†æ¬¡è¿æ¥å³å¯æˆåŠŸ 









---


----

Â© ç‰ˆæƒå£°æ˜

<escape>

<div>
    <h3 align="center"  style="color: brown;" >ç‰ˆæƒå£°æ˜</h3>
    <table>
   		<tr>
    		<ol>
				<li>æœ¬ç½‘ç«™åç§°ï¼šğš²ğš³ğš²</li>
				<li>ğš²ğš³ğš²æä¾›çš„èµ„æºä»…ä¾›æ‚¨ä¸ªäººç”¨äºéå•†ä¸šæ€§ç›®çš„ã€‚</li>
				<li>æœ¬ç«™æ–‡ç« éƒ¨åˆ†å†…å®¹å¯èƒ½æ¥æºäºç½‘ç»œï¼Œä»…ä¾›å¤§å®¶å­¦ä¹ ä¸å‚è€ƒï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»æˆ‘è¿›è¡Œåˆ é™¤å¤„ç†ã€‚</li>
				<li>æœ¬ç«™ä¸€åˆ‡èµ„æºä¸ä»£è¡¨æœ¬ç«™ç«‹åœºï¼Œå¹¶ä¸ä»£è¡¨æœ¬ç«™èµåŒå…¶è§‚ç‚¹å’Œå¯¹å…¶çœŸå®æ€§è´Ÿè´£ã€‚</li>
        		<li>æœ¬ç«™ä¸€å¾‹ç¦æ­¢ä»¥ä»»ä½•æ–¹å¼å‘å¸ƒæˆ–è½¬è½½ä»»ä½•è¿æ³•çš„ç›¸å…³ä¿¡æ¯ï¼Œè®¿å®¢å‘ç°è¯·ä¸¾æŠ¥</li> 
        		<li>æœ¬ç«™èµ„æºå¤§å¤šå­˜å‚¨åœ¨äº‘ç›˜ï¼Œå¦‚å‘ç°é“¾æ¥å¤±æ•ˆï¼Œè¯·è”ç³»æˆ‘ï¼Œæˆ‘ä¼šç¬¬ä¸€æ—¶é—´æ›´æ–°ã€‚</li>
        		<li>æœ¬ç«™å¼ºçƒˆæ‰“å‡»ç›—ç‰ˆ/ç ´è§£ç­‰æœ‰æŸä»–äººæƒç›Šå’Œè¿æ³•ä½œä¸ºï¼Œè¯·æ”¯æŒæ­£ç‰ˆï¼</li>  
			</ol>
		</tr>
	</table>
</div>



</escape>

----



