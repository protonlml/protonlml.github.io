<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>10.mysql第13章约束 | 𝚲𝚳𝚲的博客</title>
  <meta name="description" content="约束  1. 约束(constraint)概述1. 1 为什么需要约束数据完整性（Data Integrity）是指数据的精确性（Accuracy）和可靠性（Reliability）。它是防止数据库中存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息而提出的。为了保证数据的完整性，SQL规范以约束的方式对 表数据进行额外的条件限制 。从以下四个方面考虑：实体完整性（Entit">
<meta property="og:type" content="article">
<meta property="og:title" content="10.mysql第13章约束">
<meta property="og:url" content="https://protonlml.github.io/2019/10/03/mysql/10.mysql%E7%AC%AC13%E7%AB%A0%E7%BA%A6%E6%9D%9F/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="约束  1. 约束(constraint)概述1. 1 为什么需要约束数据完整性（Data Integrity）是指数据的精确性（Accuracy）和可靠性（Reliability）。它是防止数据库中存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息而提出的。为了保证数据的完整性，SQL规范以约束的方式对 表数据进行额外的条件限制 。从以下四个方面考虑：实体完整性（Entit">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-10-03T10:00:00.000Z">
<meta property="article:modified_time" content="2024-11-02T16:16:04.352Z">
<meta property="article:author" content="𝚲𝚳𝚲">
<meta property="article:tag" content="mysql8.0.22">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="https://protonlml.github.io/2019/10/03/mysql/10.mysql%E7%AC%AC13%E7%AB%A0%E7%BA%A6%E6%9D%9F/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 6.3.0"></head>


<body class="main-center theme-white" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">𝚲𝚳𝚲</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">◙</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/protonlml" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/IDEA%E5%BF%AB%E6%8D%B7%E9%94%AE/">IDEA快捷键</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Servlet/">Servlet</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">50</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/">maven</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql8-0-22/">mysql8.0.22</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/">博客相关</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7%E7%B1%BB/">工具类</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95/">常见算法</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A/">搭建图床</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BB%8F%E9%AA%8C/">经验</a><span class="category-list-count">14</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Alist/" rel="tag">Alist</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/" rel="tag">IDEA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Picgo/" rel="tag">Picgo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pure%E4%B8%BB%E9%A2%98/" rel="tag">Pure主题</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML%E7%B1%BB%E5%9B%BE/" rel="tag">UML类图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaScript/" rel="tag">javaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaweb/" rel="tag">javaweb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E5%9F%BA%E7%A1%80/" rel="tag">java基础</a><span class="tag-list-count">47</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matery%E4%B8%BB%E9%A2%98/" rel="tag">matery主题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql8-0-22/" rel="tag">mysql8.0.22</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E5%BA%8A/" rel="tag">图床</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB/" rel="tag">工具类</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95/" rel="tag">常见算法</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%8F%E9%AA%8C/" rel="tag">经验</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">项目自动化构建工具</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">83</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/1995/09/">九月 1995</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/1969/10/">十月 1969</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/1968/10/">十月 1968</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/">博客相关</a>
              </p>
              <p class="item-title">
                <a href="/2024/01/01/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/%E6%8C%82%E5%B9%B4%E5%85%BD/" class="title">悬挂年兽 喜增龙年</a>
              </p>
              <p class="item-date">
                <time datetime="2024-01-01T03:00:00.000Z" itemprop="datePublished">2024-01-01</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%85%B3/">博客相关</a>
              </p>
              <p class="item-title">
                <a href="/2020/03/17/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/matery%E4%B8%BB%E9%A2%98%E7%9A%84%E4%BD%BF%E7%94%A8/" class="title">matery主题的使用</a>
              </p>
              <p class="item-date">
                <time datetime="2020-03-17T03:00:00.000Z" itemprop="datePublished">2020-03-17</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E7%BB%8F%E9%AA%8C/">经验</a>
              </p>
              <p class="item-title">
                <a href="/2019/10/10/%E7%BB%8F%E9%AA%8C/3.git%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%93%E5%BA%93%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F/" class="title">3.git初始化仓库的两种方式</a>
              </p>
              <p class="item-date">
                <time datetime="2019-10-10T06:00:00.000Z" itemprop="datePublished">2019-10-10</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/java/">java</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/java/maven/">maven</a>
              </p>
              <p class="item-title">
                <a href="/2019/10/10/java%E5%9F%BA%E7%A1%80/Maven/" class="title">Maven</a>
              </p>
              <p class="item-date">
                <time datetime="2019-10-10T03:00:00.000Z" itemprop="datePublished">2019-10-10</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Servlet/">Servlet</a>
              </p>
              <p class="item-title">
                <a href="/2019/10/07/javaweb/2.Servlet/" class="title">2.Servlet</a>
              </p>
              <p class="item-date">
                <time datetime="2019-10-07T01:00:00.000Z" itemprop="datePublished">2019-10-07</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-mysql/10.mysql第13章约束" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      10.mysql第13章约束
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2019/10/03/mysql/10.mysql%E7%AC%AC13%E7%AB%A0%E7%BA%A6%E6%9D%9F/" class="article-date">
	  <time datetime="2019-10-03T10:00:00.000Z" itemprop="datePublished">2019-10-03</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/mysql8-0-22/">mysql8.0.22</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/mysql8-0-22/" rel="tag">mysql8.0.22</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2019/10/03/mysql/10.mysql%E7%AC%AC13%E7%AB%A0%E7%BA%A6%E6%9D%9F/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 10.4k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 44(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1><center>约束</center></h1>

<h2 id="1-约束-constraint-概述"><a href="#1-约束-constraint-概述" class="headerlink" title="1. 约束(constraint)概述"></a>1. 约束(constraint)概述</h2><h2 id="1-1-为什么需要约束"><a href="#1-1-为什么需要约束" class="headerlink" title="1. 1 为什么需要约束"></a>1. 1 为什么需要约束</h2><h4 id="数据完整性（Data-Integrity）是指数据的精确性（Accuracy）和可靠性（Reliability）。它是防止数据库中"><a href="#数据完整性（Data-Integrity）是指数据的精确性（Accuracy）和可靠性（Reliability）。它是防止数据库中" class="headerlink" title="数据完整性（Data Integrity）是指数据的精确性（Accuracy）和可靠性（Reliability）。它是防止数据库中"></a>数据完整性（Data Integrity）是指数据的精确性（Accuracy）和可靠性（Reliability）。它是防止数据库中</h4><h4 id="存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息而提出的。"><a href="#存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息而提出的。" class="headerlink" title="存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息而提出的。"></a>存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息而提出的。</h4><h4 id="为了保证数据的完整性，SQL规范以约束的方式对-表数据进行额外的条件限制-。从以下四个方面考虑："><a href="#为了保证数据的完整性，SQL规范以约束的方式对-表数据进行额外的条件限制-。从以下四个方面考虑：" class="headerlink" title="为了保证数据的完整性，SQL规范以约束的方式对 表数据进行额外的条件限制 。从以下四个方面考虑："></a>为了保证数据的完整性，SQL规范以约束的方式对 表数据进行额外的条件限制 。从以下四个方面考虑：</h4><h4 id="实体完整性（Entity-Integrity）：例如，同一个表中，不能存在两条完全相同无法区分的记录"><a href="#实体完整性（Entity-Integrity）：例如，同一个表中，不能存在两条完全相同无法区分的记录" class="headerlink" title="实体完整性（Entity Integrity）：例如，同一个表中，不能存在两条完全相同无法区分的记录"></a>实体完整性（Entity Integrity）：例如，同一个表中，不能存在两条完全相同无法区分的记录</h4><h4 id="域完整性（Domain-Integrity）：例如：年龄范围0-120，性别范围“男-女”"><a href="#域完整性（Domain-Integrity）：例如：年龄范围0-120，性别范围“男-女”" class="headerlink" title="域完整性（Domain Integrity）：例如：年龄范围0-120，性别范围“男&#x2F;女”"></a>域完整性（Domain Integrity）：例如：年龄范围0-120，性别范围“男&#x2F;女”</h4><h4 id="引用完整性（Referential-Integrity）：例如：员工所在部门，在部门表中要能找到这个部门"><a href="#引用完整性（Referential-Integrity）：例如：员工所在部门，在部门表中要能找到这个部门" class="headerlink" title="引用完整性（Referential Integrity）：例如：员工所在部门，在部门表中要能找到这个部门"></a>引用完整性（Referential Integrity）：例如：员工所在部门，在部门表中要能找到这个部门</h4><h4 id="用户自定义完整性（User-defined-Integrity）：例如：用户名唯一、密码不能为空等，本部门"><a href="#用户自定义完整性（User-defined-Integrity）：例如：用户名唯一、密码不能为空等，本部门" class="headerlink" title="用户自定义完整性（User-defined Integrity）：例如：用户名唯一、密码不能为空等，本部门"></a>用户自定义完整性（User-defined Integrity）：例如：用户名唯一、密码不能为空等，本部门</h4><h4 id="经理的工资不得高于本部门职工的平均工资的-5-倍。"><a href="#经理的工资不得高于本部门职工的平均工资的-5-倍。" class="headerlink" title="经理的工资不得高于本部门职工的平均工资的 5 倍。"></a>经理的工资不得高于本部门职工的平均工资的 5 倍。</h4><h2 id="1-2-什么是约束"><a href="#1-2-什么是约束" class="headerlink" title="1. 2 什么是约束"></a>1. 2 什么是约束</h2><h4 id="约束是表级的强制规定。"><a href="#约束是表级的强制规定。" class="headerlink" title="约束是表级的强制规定。"></a>约束是表级的强制规定。</h4><h4 id="可以在-创建表时规定约束（通过-CREATE-TABLE-语句）-，或者在-表创建之后通过-ALTER-TABLE-语句规定"><a href="#可以在-创建表时规定约束（通过-CREATE-TABLE-语句）-，或者在-表创建之后通过-ALTER-TABLE-语句规定" class="headerlink" title="可以在 创建表时规定约束（通过 CREATE TABLE 语句） ，或者在 表创建之后通过 ALTER TABLE 语句规定"></a>可以在 创建表时规定约束（通过 CREATE TABLE 语句） ，或者在 表创建之后通过 ALTER TABLE 语句规定</h4><h4 id="约束-。"><a href="#约束-。" class="headerlink" title="约束 。"></a>约束 。</h4><h2 id="1-3-约束的分类"><a href="#1-3-约束的分类" class="headerlink" title="1. 3 约束的分类"></a>1. 3 约束的分类</h2><h4 id="根据约束数据列的限制，-约束可分为："><a href="#根据约束数据列的限制，-约束可分为：" class="headerlink" title="根据约束数据列的限制， 约束可分为："></a>根据约束数据列的限制， 约束可分为：</h4><h4 id="单列约束-：每个约束只约束一列"><a href="#单列约束-：每个约束只约束一列" class="headerlink" title="单列约束 ：每个约束只约束一列"></a>单列约束 ：每个约束只约束一列</h4><h4 id="多列约束-：每个约束可约束多列数据"><a href="#多列约束-：每个约束可约束多列数据" class="headerlink" title="多列约束 ：每个约束可约束多列数据"></a>多列约束 ：每个约束可约束多列数据</h4><h4 id="根据约束的作用范围-，约束可分为："><a href="#根据约束的作用范围-，约束可分为：" class="headerlink" title="根据约束的作用范围 ，约束可分为："></a>根据约束的作用范围 ，约束可分为：</h4><h4 id="列级约束-：只能作用在一个列上，跟在列的定义后面"><a href="#列级约束-：只能作用在一个列上，跟在列的定义后面" class="headerlink" title="列级约束 ：只能作用在一个列上，跟在列的定义后面"></a>列级约束 ：只能作用在一个列上，跟在列的定义后面</h4><h4 id="表级约束-：可以作用在多个列上，不与列一起，而是单独定义"><a href="#表级约束-：可以作用在多个列上，不与列一起，而是单独定义" class="headerlink" title="表级约束 ：可以作用在多个列上，不与列一起，而是单独定义"></a>表级约束 ：可以作用在多个列上，不与列一起，而是单独定义</h4><h4 id="根据约束起的作用-，约束可分为："><a href="#根据约束起的作用-，约束可分为：" class="headerlink" title="根据约束起的作用 ，约束可分为："></a>根据约束起的作用 ，约束可分为：</h4><h4 id="NOT-NULL-非空约束，规定某个字段不能为空"><a href="#NOT-NULL-非空约束，规定某个字段不能为空" class="headerlink" title="NOT NULL 非空约束，规定某个字段不能为空"></a>NOT NULL 非空约束，规定某个字段不能为空</h4><h4 id="UNIQUE-唯一约束-，-规定某个字段在整个表中是唯一的"><a href="#UNIQUE-唯一约束-，-规定某个字段在整个表中是唯一的" class="headerlink" title="UNIQUE 唯一约束 ， 规定某个字段在整个表中是唯一的"></a>UNIQUE 唯一约束 ， 规定某个字段在整个表中是唯一的</h4><h4 id="PRIMARY-KEY-主键-非空且唯一-约束"><a href="#PRIMARY-KEY-主键-非空且唯一-约束" class="headerlink" title="PRIMARY KEY 主键(非空且唯一)约束"></a>PRIMARY KEY 主键(非空且唯一)约束</h4><h4 id="FOREIGN-KEY-外键约束"><a href="#FOREIGN-KEY-外键约束" class="headerlink" title="FOREIGN KEY 外键约束"></a>FOREIGN KEY 外键约束</h4><h4 id="CHECK-检查约束"><a href="#CHECK-检查约束" class="headerlink" title="CHECK 检查约束"></a>CHECK 检查约束</h4><h4 id="DEFAULT-默认值约束"><a href="#DEFAULT-默认值约束" class="headerlink" title="DEFAULT 默认值约束"></a>DEFAULT 默认值约束</h4><h5 id="位置-支持的约束类型-是否可以起约束名"><a href="#位置-支持的约束类型-是否可以起约束名" class="headerlink" title="位置 支持的约束类型 是否可以起约束名"></a>位置 支持的约束类型 是否可以起约束名</h5><h5 id="列级约束：-列的后面-语法都支持，但外键没有效果-不可以"><a href="#列级约束：-列的后面-语法都支持，但外键没有效果-不可以" class="headerlink" title="列级约束： 列的后面 语法都支持，但外键没有效果 不可以"></a>列级约束： 列的后面 语法都支持，但外键没有效果 不可以</h5><h5 id="表级约束：-所有列的下面-默认和非空不支持，其他支持-可以（主键没有效果）"><a href="#表级约束：-所有列的下面-默认和非空不支持，其他支持-可以（主键没有效果）" class="headerlink" title="表级约束： 所有列的下面 默认和非空不支持，其他支持 可以（主键没有效果）"></a>表级约束： 所有列的下面 默认和非空不支持，其他支持 可以（主键没有效果）</h5><h4 id="注意：-MySQL不支持check约束，但可以使用check约束，而没有任何效果"><a href="#注意：-MySQL不支持check约束，但可以使用check约束，而没有任何效果" class="headerlink" title="注意： MySQL不支持check约束，但可以使用check约束，而没有任何效果"></a>注意： MySQL不支持check约束，但可以使用check约束，而没有任何效果</h4><h4 id="查看某个表已有的约束"><a href="#查看某个表已有的约束" class="headerlink" title="查看某个表已有的约束"></a>查看某个表已有的约束</h4><h2 id="2-非空约束"><a href="#2-非空约束" class="headerlink" title="2. 非空约束"></a>2. 非空约束</h2><h3 id="2-1-作用"><a href="#2-1-作用" class="headerlink" title="2. 1 作用"></a>2. 1 作用</h3><h4 id="限定某个字段-某列的值不允许为空"><a href="#限定某个字段-某列的值不允许为空" class="headerlink" title="限定某个字段&#x2F;某列的值不允许为空"></a>限定某个字段&#x2F;某列的值不允许为空</h4><h3 id="2-2-关键字"><a href="#2-2-关键字" class="headerlink" title="2. 2 关键字"></a>2. 2 关键字</h3><h4 id="NOT-NULL"><a href="#NOT-NULL" class="headerlink" title="NOT NULL"></a>NOT NULL</h4><h3 id="2-3-特点"><a href="#2-3-特点" class="headerlink" title="2. 3 特点"></a>2. 3 特点</h3><h4 id="默认，所有的类型的值都可以是NULL，包括INT、FLOAT等数据类型"><a href="#默认，所有的类型的值都可以是NULL，包括INT、FLOAT等数据类型" class="headerlink" title="默认，所有的类型的值都可以是NULL，包括INT、FLOAT等数据类型"></a>默认，所有的类型的值都可以是NULL，包括INT、FLOAT等数据类型</h4><h4 id="非空约束只能出现在表对象的列上，只能某个列单独限定非空，不能组合非空"><a href="#非空约束只能出现在表对象的列上，只能某个列单独限定非空，不能组合非空" class="headerlink" title="非空约束只能出现在表对象的列上，只能某个列单独限定非空，不能组合非空"></a>非空约束只能出现在表对象的列上，只能某个列单独限定非空，不能组合非空</h4><h4 id="一个表可以有很多列都分别限定了非空"><a href="#一个表可以有很多列都分别限定了非空" class="headerlink" title="一个表可以有很多列都分别限定了非空"></a>一个表可以有很多列都分别限定了非空</h4><h4 id="空字符串’’不等于NULL，-0-也不等于NULL"><a href="#空字符串’’不等于NULL，-0-也不等于NULL" class="headerlink" title="空字符串’’不等于NULL， 0 也不等于NULL"></a>空字符串’’不等于NULL， 0 也不等于NULL</h4><h3 id="2-4-添加非空约束"><a href="#2-4-添加非空约束" class="headerlink" title="2. 4 添加非空约束"></a>2. 4 添加非空约束</h3><h4 id="（-1-）建表时"><a href="#（-1-）建表时" class="headerlink" title="（ 1 ）建表时"></a>（ 1 ）建表时</h4><h4 id="举例："><a href="#举例：" class="headerlink" title="举例："></a>举例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#information_schema数据库名（系统库）</span><br><span class="line">#table_constraints表名称（专门存储各个表的约束）</span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;表名称&#x27;;</span><br></pre></td></tr></table></figure>
<h5 id="CREATE-TABLE-表名称"><a href="#CREATE-TABLE-表名称" class="headerlink" title="CREATE TABLE 表名称("></a>CREATE TABLE 表名称(</h5><h5 id="字段名-数据类型"><a href="#字段名-数据类型" class="headerlink" title="字段名 数据类型,"></a>字段名 数据类型,</h5><h5 id="字段名-数据类型-NOT-NULL"><a href="#字段名-数据类型-NOT-NULL" class="headerlink" title="字段名 数据类型 NOT NULL,"></a>字段名 数据类型 NOT NULL,</h5><h5 id="字段名-数据类型-NOT-NULL-1"><a href="#字段名-数据类型-NOT-NULL-1" class="headerlink" title="字段名 数据类型 NOT NULL"></a>字段名 数据类型 NOT NULL</h5><h5 id=""><a href="#" class="headerlink" title=");"></a>);</h5><h4 id="（-2-）建表后"><a href="#（-2-）建表后" class="headerlink" title="（ 2 ）建表后"></a>（ 2 ）建表后</h4><h4 id="举例：-1"><a href="#举例：-1" class="headerlink" title="举例："></a>举例：</h4><h3 id="2-5-删除非空约束"><a href="#2-5-删除非空约束" class="headerlink" title="2. 5 删除非空约束"></a>2. 5 删除非空约束</h3><h4 id="举例：-2"><a href="#举例：-2" class="headerlink" title="举例："></a>举例：</h4><h2 id="3-唯一性约束"><a href="#3-唯一性约束" class="headerlink" title="3. 唯一性约束"></a>3. 唯一性约束</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp(</span><br><span class="line">id INT( 10 ) NOT NULL,</span><br><span class="line">NAME VARCHAR( 20 ) NOT NULL,</span><br><span class="line">sex CHAR NULL</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student(</span><br><span class="line">sid int,</span><br><span class="line">sname varchar( 20 ) not null,</span><br><span class="line">tel char( 11 ) ,</span><br><span class="line">cardid char( 18 ) not null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 1 ,&#x27;张三&#x27;,&#x27;13710011002&#x27;,&#x27;110222198912032545&#x27;); #成功</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 2 ,&#x27;李四&#x27;,&#x27;13710011002&#x27;,null);#身份证号为空</span><br><span class="line">ERROR 1048 ( 23000 ): Column &#x27;cardid&#x27; cannot be null</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 2 ,&#x27;李四&#x27;,null,&#x27;110222198912032546&#x27;);#成功，tel允许为空</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 3 ,null,null,&#x27;110222198912032547&#x27;);#失败</span><br><span class="line">ERROR 1048 ( 23000 ): Column &#x27;sname&#x27; cannot be null</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 数据类型 not null;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY sex VARCHAR( 30 ) NOT NULL;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student modify sname varchar( 20 ) not null;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 数据类型 NULL;#去掉not null，相当于修改某个非注解字段，该字段允</span><br><span class="line">许为空</span><br></pre></td></tr></table></figure>
<h5 id="或"><a href="#或" class="headerlink" title="或"></a>或</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 数据类型;#去掉not null，相当于修改某个非注解字段，该字段允许为空</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY sex VARCHAR( 30 ) NULL;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY NAME VARCHAR( 15 ) DEFAULT &#x27;abc&#x27; NULL;</span><br></pre></td></tr></table></figure>

<h3 id="3-1-作用"><a href="#3-1-作用" class="headerlink" title="3. 1 作用"></a>3. 1 作用</h3><h4 id="用来限制某个字段-某列的值不能重复。"><a href="#用来限制某个字段-某列的值不能重复。" class="headerlink" title="用来限制某个字段&#x2F;某列的值不能重复。"></a>用来限制某个字段&#x2F;某列的值不能重复。</h4><h3 id="3-2-关键字"><a href="#3-2-关键字" class="headerlink" title="3. 2 关键字"></a>3. 2 关键字</h3><h4 id="UNIQUE"><a href="#UNIQUE" class="headerlink" title="UNIQUE"></a>UNIQUE</h4><h3 id="3-3-特点"><a href="#3-3-特点" class="headerlink" title="3. 3 特点"></a>3. 3 特点</h3><h4 id="同一个表可以有多个唯一约束。"><a href="#同一个表可以有多个唯一约束。" class="headerlink" title="同一个表可以有多个唯一约束。"></a>同一个表可以有多个唯一约束。</h4><h4 id="唯一约束可以是某一个列的值唯一，也可以多个列组合的值唯一。"><a href="#唯一约束可以是某一个列的值唯一，也可以多个列组合的值唯一。" class="headerlink" title="唯一约束可以是某一个列的值唯一，也可以多个列组合的值唯一。"></a>唯一约束可以是某一个列的值唯一，也可以多个列组合的值唯一。</h4><h4 id="唯一性约束允许列值为空。"><a href="#唯一性约束允许列值为空。" class="headerlink" title="唯一性约束允许列值为空。"></a>唯一性约束允许列值为空。</h4><h4 id="在创建唯一约束的时候，如果不给唯一约束命名，就默认和列名相同。"><a href="#在创建唯一约束的时候，如果不给唯一约束命名，就默认和列名相同。" class="headerlink" title="在创建唯一约束的时候，如果不给唯一约束命名，就默认和列名相同。"></a>在创建唯一约束的时候，如果不给唯一约束命名，就默认和列名相同。</h4><h4 id="MySQL会给唯一约束的列上默认创建一个唯一索引。"><a href="#MySQL会给唯一约束的列上默认创建一个唯一索引。" class="headerlink" title="MySQL会给唯一约束的列上默认创建一个唯一索引。"></a>MySQL会给唯一约束的列上默认创建一个唯一索引。</h4><h3 id="3-4-添加唯一约束"><a href="#3-4-添加唯一约束" class="headerlink" title="3. 4 添加唯一约束"></a>3. 4 添加唯一约束</h3><h4 id="（-1-）建表时-1"><a href="#（-1-）建表时-1" class="headerlink" title="（ 1 ）建表时"></a>（ 1 ）建表时</h4><h4 id="举例：-3"><a href="#举例：-3" class="headerlink" title="举例："></a>举例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型 unique,</span><br><span class="line">字段名 数据类型 unique key,</span><br><span class="line">字段名 数据类型</span><br><span class="line">);</span><br><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型,</span><br><span class="line">[constraint 约束名] unique key(字段名)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="表示用户名和密码组合不能重复"><a href="#表示用户名和密码组合不能重复" class="headerlink" title="表示用户名和密码组合不能重复"></a>表示用户名和密码组合不能重复</h4><h4 id="（-2-）建表后指定唯一键约束"><a href="#（-2-）建表后指定唯一键约束" class="headerlink" title="（ 2 ）建表后指定唯一键约束"></a>（ 2 ）建表后指定唯一键约束</h4><h4 id="举例：-4"><a href="#举例：-4" class="headerlink" title="举例："></a>举例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">sid int,</span><br><span class="line">sname varchar( 20 ),</span><br><span class="line">tel char( 11 ) unique,</span><br><span class="line">cardid char( 18 ) unique key</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t_course(</span><br><span class="line">cid INT UNIQUE,</span><br><span class="line">cname VARCHAR( 100 ) UNIQUE,</span><br><span class="line">description VARCHAR( 200 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="CREATE-TABLE-USER"><a href="#CREATE-TABLE-USER" class="headerlink" title="CREATE TABLE USER("></a>CREATE TABLE USER(</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">id INT NOT NULL,</span><br><span class="line">NAME VARCHAR( 25 ),</span><br><span class="line">PASSWORD VARCHAR( 16 ),</span><br><span class="line">-- 使用表级约束语法</span><br><span class="line">CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 1 ,&#x27;张三&#x27;,&#x27;13710011002&#x27;,&#x27;101223199012015623&#x27;);</span><br><span class="line">insert into student values( 2 ,&#x27;李四&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015624&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| sid | sname | tel | cardid |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| 1 | 张三 | 13710011002 | 101223199012015623 |</span><br><span class="line">| 2 | 李四 | 13710011003 | 101223199012015624 |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 3 ,&#x27;王五&#x27;,&#x27;13710011004&#x27;,&#x27;101223199012015624&#x27;); #身份证号重复</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate entry &#x27;101223199012015624&#x27; for key &#x27;cardid&#x27;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 3 ,&#x27;王五&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015625&#x27;);</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate entry &#x27;13710011003&#x27; for key &#x27;tel&#x27;</span><br></pre></td></tr></table></figure>
<h5 id="字段列表中如果是一个字段，表示该列的值唯一。如果是两个或更多个字段，那么复合唯一，即多个字段的组合是唯"><a href="#字段列表中如果是一个字段，表示该列的值唯一。如果是两个或更多个字段，那么复合唯一，即多个字段的组合是唯" class="headerlink" title="#字段列表中如果是一个字段，表示该列的值唯一。如果是两个或更多个字段，那么复合唯一，即多个字段的组合是唯"></a>#字段列表中如果是一个字段，表示该列的值唯一。如果是两个或更多个字段，那么复合唯一，即多个字段的组合是唯</h5><h5 id="一的"><a href="#一的" class="headerlink" title="一的"></a>一的</h5><h5 id="方式-1-："><a href="#方式-1-：" class="headerlink" title="#方式 1 ："></a>#方式 1 ：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 add unique key(字段列表);</span><br></pre></td></tr></table></figure>
<h5 id="方式-2-："><a href="#方式-2-：" class="headerlink" title="#方式 2 ："></a>#方式 2 ：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 字段类型 unique;</span><br></pre></td></tr></table></figure>
<h5 id="ALTER-TABLE-USER"><a href="#ALTER-TABLE-USER" class="headerlink" title="ALTER TABLE USER"></a>ALTER TABLE USER</h5><h5 id="ADD-UNIQUE-NAME-PASSWORD"><a href="#ADD-UNIQUE-NAME-PASSWORD" class="headerlink" title="ADD UNIQUE(NAME,PASSWORD);"></a>ADD UNIQUE(NAME,PASSWORD);</h5><h4 id="举例：-5"><a href="#举例：-5" class="headerlink" title="举例："></a>举例：</h4><h3 id="3-5-关于复合唯一约束"><a href="#3-5-关于复合唯一约束" class="headerlink" title="3. 5 关于复合唯一约束"></a>3. 5 关于复合唯一约束</h3><h5 id="ALTER-TABLE-USER-1"><a href="#ALTER-TABLE-USER-1" class="headerlink" title="ALTER TABLE USER"></a>ALTER TABLE USER</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADD CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD);</span><br></pre></td></tr></table></figure>
<h5 id="ALTER-TABLE-USER-2"><a href="#ALTER-TABLE-USER-2" class="headerlink" title="ALTER TABLE USER"></a>ALTER TABLE USER</h5><h5 id="MODIFY-NAME-VARCHAR-20-UNIQUE"><a href="#MODIFY-NAME-VARCHAR-20-UNIQUE" class="headerlink" title="MODIFY NAME VARCHAR( 20 ) UNIQUE;"></a>MODIFY NAME VARCHAR( 20 ) UNIQUE;</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">sid int primary key,</span><br><span class="line">sname varchar( 20 ),</span><br><span class="line">tel char( 11 ) ,</span><br><span class="line">cardid char( 18 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table student add unique key(tel);</span><br><span class="line">alter table student add unique key(cardid);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型,</span><br><span class="line">unique key(字段列表) #字段列表中写的是多个字段名，多个字段名用逗号分隔，表示那么是复合唯一，即多</span><br><span class="line">个字段的组合是唯一的</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="学生表"><a href="#学生表" class="headerlink" title="#学生表"></a>#学生表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">sid int, #学号</span><br><span class="line">sname varchar( 20 ), #姓名</span><br><span class="line">tel char( 11 ) unique key,  #电话</span><br><span class="line">cardid char( 18 ) unique key #身份证号</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="课程表"><a href="#课程表" class="headerlink" title="#课程表"></a>#课程表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table course(</span><br><span class="line">cid int,  #课程编号</span><br><span class="line">cname varchar( 20 ) #课程名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="选课表"><a href="#选课表" class="headerlink" title="#选课表"></a>#选课表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table student_course(</span><br><span class="line">id int,</span><br><span class="line">sid int,</span><br><span class="line">cid int,</span><br><span class="line">score int,</span><br><span class="line">unique key(sid,cid)  #复合唯一</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 1 ,&#x27;张三&#x27;,&#x27;13710011002&#x27;,&#x27;101223199012015623&#x27;);#成功</span><br><span class="line">insert into student values( 2 ,&#x27;李四&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015624&#x27;);#成功</span><br><span class="line">insert into course values( 1001 ,&#x27;Java&#x27;),( 1002 ,&#x27;MySQL&#x27;);#成功</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-删除唯一约束"><a href="#3-5-删除唯一约束" class="headerlink" title="3. 5 删除唯一约束"></a>3. 5 删除唯一约束</h3><h4 id="添加唯一性约束的列上也会自动创建唯一索引。"><a href="#添加唯一性约束的列上也会自动创建唯一索引。" class="headerlink" title="添加唯一性约束的列上也会自动创建唯一索引。"></a>添加唯一性约束的列上也会自动创建唯一索引。</h4><h4 id="删除唯一约束只能通过删除唯一索引的方式删除。"><a href="#删除唯一约束只能通过删除唯一索引的方式删除。" class="headerlink" title="删除唯一约束只能通过删除唯一索引的方式删除。"></a>删除唯一约束只能通过删除唯一索引的方式删除。</h4><h4 id="删除时需要指定唯一索引名，唯一索引名就和唯一约束名一样。"><a href="#删除时需要指定唯一索引名，唯一索引名就和唯一约束名一样。" class="headerlink" title="删除时需要指定唯一索引名，唯一索引名就和唯一约束名一样。"></a>删除时需要指定唯一索引名，唯一索引名就和唯一约束名一样。</h4><h4 id="如果创建唯一约束时未指定名称，如果是单列，就默认和列名相同；如果是组合列，那么默认和"><a href="#如果创建唯一约束时未指定名称，如果是单列，就默认和列名相同；如果是组合列，那么默认和" class="headerlink" title="如果创建唯一约束时未指定名称，如果是单列，就默认和列名相同；如果是组合列，那么默认和()"></a>如果创建唯一约束时未指定名称，如果是单列，就默认和列名相同；如果是组合列，那么默认和()</h4><h4 id="中排在第一个的列名相同。也可以自定义唯一性约束名。"><a href="#中排在第一个的列名相同。也可以自定义唯一性约束名。" class="headerlink" title="中排在第一个的列名相同。也可以自定义唯一性约束名。"></a>中排在第一个的列名相同。也可以自定义唯一性约束名。</h4><h4 id="注意：可以通过-show-index-from-表名称-查看表的索引"><a href="#注意：可以通过-show-index-from-表名称-查看表的索引" class="headerlink" title="注意：可以通过 show index from 表名称;查看表的索引"></a>注意：可以通过 show index from 表名称;查看表的索引</h4><h5 id="—–-——-————-——————–"><a href="#—–-——-————-——————–" class="headerlink" title="+—–+——-+————-+——————–+"></a>+—–+——-+————-+——————–+</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">| sid | sname | tel | cardid |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| 1 | 张三 | 13710011002 | 101223199012015623 |</span><br><span class="line">| 2 | 李四 | 13710011003 | 101223199012015624 |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from course;</span><br><span class="line">+------+-------+</span><br><span class="line">| cid | cname |</span><br><span class="line">+------+-------+</span><br><span class="line">| 1001 | Java |</span><br><span class="line">| 1002 | MySQL |</span><br><span class="line">+------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values</span><br><span class="line">( 1 , 1 , 1001 , 89 ),</span><br><span class="line">( 2 , 1 , 1002 , 90 ),</span><br><span class="line">( 3 , 2 , 1001 , 88 ),</span><br><span class="line">( 4 , 2 , 1002 , 56 );#成功</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student_course;</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">| id | sid | cid | score |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">| 1 | 1 | 1001 | 89 |</span><br><span class="line">| 2 | 1 | 1002 | 90 |</span><br><span class="line">| 3 | 2 | 1001 | 88 |</span><br><span class="line">| 4 | 2 | 1002 | 56 |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values ( 5 , 1 , 1001 , 88 );#失败</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;1-1001&#x27; for key &#x27;sid&#x27; 违反sid-cid的复合唯一</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;表名&#x27;; #查看都有哪</span><br><span class="line">些约束</span><br></pre></td></tr></table></figure>
<h5 id="ALTER-TABLE-USER-3"><a href="#ALTER-TABLE-USER-3" class="headerlink" title="ALTER TABLE USER"></a>ALTER TABLE USER</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX uk_name_pwd;</span><br></pre></td></tr></table></figure>

<h2 id="4-PRIMARY-KEY-约束"><a href="#4-PRIMARY-KEY-约束" class="headerlink" title="4. PRIMARY KEY 约束"></a>4. PRIMARY KEY 约束</h2><h3 id="4-1-作用"><a href="#4-1-作用" class="headerlink" title="4. 1 作用"></a>4. 1 作用</h3><h4 id="用来唯一标识表中的一行记录。"><a href="#用来唯一标识表中的一行记录。" class="headerlink" title="用来唯一标识表中的一行记录。"></a>用来唯一标识表中的一行记录。</h4><h3 id="4-2-关键字"><a href="#4-2-关键字" class="headerlink" title="4. 2 关键字"></a>4. 2 关键字</h3><h4 id="primary-key"><a href="#primary-key" class="headerlink" title="primary key"></a>primary key</h4><h3 id="4-3-特点"><a href="#4-3-特点" class="headerlink" title="4. 3 特点"></a>4. 3 特点</h3><h4 id="主键约束相当于-唯一约束-非空约束的组合-，主键约束列不允许重复，也不允许出现空值。"><a href="#主键约束相当于-唯一约束-非空约束的组合-，主键约束列不允许重复，也不允许出现空值。" class="headerlink" title="主键约束相当于 唯一约束+非空约束的组合 ，主键约束列不允许重复，也不允许出现空值。"></a>主键约束相当于 唯一约束+非空约束的组合 ，主键约束列不允许重复，也不允许出现空值。</h4><h4 id="一个表最多只能有一个主键约束，建立主键约束可以在列级别创建，也可以在表级别上创建。"><a href="#一个表最多只能有一个主键约束，建立主键约束可以在列级别创建，也可以在表级别上创建。" class="headerlink" title="一个表最多只能有一个主键约束，建立主键约束可以在列级别创建，也可以在表级别上创建。"></a>一个表最多只能有一个主键约束，建立主键约束可以在列级别创建，也可以在表级别上创建。</h4><h4 id="主键约束对应着表中的一列或者多列（复合主键）"><a href="#主键约束对应着表中的一列或者多列（复合主键）" class="headerlink" title="主键约束对应着表中的一列或者多列（复合主键）"></a>主键约束对应着表中的一列或者多列（复合主键）</h4><h4 id="如果是多列组合的复合主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。"><a href="#如果是多列组合的复合主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。" class="headerlink" title="如果是多列组合的复合主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。"></a>如果是多列组合的复合主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。</h4><h4 id="MySQL的主键名总是PRIMARY-，就算自己命名了主键约束名也没用。"><a href="#MySQL的主键名总是PRIMARY-，就算自己命名了主键约束名也没用。" class="headerlink" title="MySQL的主键名总是PRIMARY ，就算自己命名了主键约束名也没用。"></a>MySQL的主键名总是PRIMARY ，就算自己命名了主键约束名也没用。</h4><h4 id="当创建主键约束时，系统默认会在所在的列或列组合上建立对应的-主键索引-（能够根据主键查询"><a href="#当创建主键约束时，系统默认会在所在的列或列组合上建立对应的-主键索引-（能够根据主键查询" class="headerlink" title="当创建主键约束时，系统默认会在所在的列或列组合上建立对应的 主键索引 （能够根据主键查询"></a>当创建主键约束时，系统默认会在所在的列或列组合上建立对应的 主键索引 （能够根据主键查询</h4><h4 id="的，就根据主键查询，效率更高）。如果删除主键约束了，主键约束对应的索引就自动删除了。"><a href="#的，就根据主键查询，效率更高）。如果删除主键约束了，主键约束对应的索引就自动删除了。" class="headerlink" title="的，就根据主键查询，效率更高）。如果删除主键约束了，主键约束对应的索引就自动删除了。"></a>的，就根据主键查询，效率更高）。如果删除主键约束了，主键约束对应的索引就自动删除了。</h4><h4 id="需要注意的一点是，不要修改主键字段的值。因为主键是数据记录的唯一标识，如果修改了主键的"><a href="#需要注意的一点是，不要修改主键字段的值。因为主键是数据记录的唯一标识，如果修改了主键的" class="headerlink" title="需要注意的一点是，不要修改主键字段的值。因为主键是数据记录的唯一标识，如果修改了主键的"></a>需要注意的一点是，不要修改主键字段的值。因为主键是数据记录的唯一标识，如果修改了主键的</h4><h4 id="值，就有可能会破坏数据的完整性。"><a href="#值，就有可能会破坏数据的完整性。" class="headerlink" title="值，就有可能会破坏数据的完整性。"></a>值，就有可能会破坏数据的完整性。</h4><h3 id="4-4-添加主键约束"><a href="#4-4-添加主键约束" class="headerlink" title="4. 4 添加主键约束"></a>4. 4 添加主键约束</h3><h4 id="（-1-）建表时指定主键约束"><a href="#（-1-）建表时指定主键约束" class="headerlink" title="（ 1 ）建表时指定主键约束"></a>（ 1 ）建表时指定主键约束</h4><h4 id="举例：-6"><a href="#举例：-6" class="headerlink" title="举例："></a>举例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型 primary key, #列级模式</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型</span><br><span class="line">);</span><br><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型,</span><br><span class="line">[constraint 约束名] primary key(字段名) #表级模式</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table temp(</span><br><span class="line">id int primary key,</span><br><span class="line">name varchar( 20 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc temp;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| id | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| name | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values( 1 ,&#x27;张三&#x27;);#成功</span><br><span class="line">insert into temp values( 2 ,&#x27;李四&#x27;);#成功</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">| 1 | 张三 |</span><br><span class="line">| 2 | 李四 |</span><br><span class="line">+----+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values( 1 ,&#x27;张三&#x27;);#失败</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate（重复） entry（键入，输入） &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values( 1 ,&#x27;王五&#x27;);#失败</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values( 3 ,&#x27;张三&#x27;);#成功</span><br></pre></td></tr></table></figure>

<h4 id="再举例："><a href="#再举例：" class="headerlink" title="再举例："></a>再举例：</h4><h4 id="列级约束"><a href="#列级约束" class="headerlink" title="列级约束"></a>列级约束</h4><h4 id="表级约束"><a href="#表级约束" class="headerlink" title="表级约束"></a>表级约束</h4><h4 id="（-2-）建表后增加主键约束"><a href="#（-2-）建表后增加主键约束" class="headerlink" title="（ 2 ）建表后增加主键约束"></a>（ 2 ）建表后增加主键约束</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">| 1 | 张三 |</span><br><span class="line">| 2 | 李四 |</span><br><span class="line">| 3 | 张三 |</span><br><span class="line">+----+------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values( 4 ,null);#成功</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values(null,&#x27;李琦&#x27;);#失败</span><br><span class="line">ERROR 1048 ( 23000 ): Column &#x27;id&#x27; cannot be null</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">| 1 | 张三 |</span><br><span class="line">| 2 | 李四 |</span><br><span class="line">| 3 | 张三 |</span><br><span class="line">| 4 | NULL |</span><br><span class="line">+----+------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h5 id="演示一个表建立两个主键约束"><a href="#演示一个表建立两个主键约束" class="headerlink" title="#演示一个表建立两个主键约束"></a>#演示一个表建立两个主键约束</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table temp(</span><br><span class="line">id int primary key,</span><br><span class="line">name varchar( 20 ) primary key</span><br><span class="line">);</span><br><span class="line">ERROR 1068 ( 42000 ): Multiple（多重的） primary key defined（定义）</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp4(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT ,</span><br><span class="line">NAME VARCHAR( 20 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp5(</span><br><span class="line">id INT NOT NULL AUTO_INCREMENT,</span><br><span class="line">NAME VARCHAR( 20 ),</span><br><span class="line">pwd VARCHAR( 15 ),</span><br><span class="line">CONSTRAINT emp5_id_pk PRIMARY KEY(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="ALTER-TABLE-表名称-ADD-PRIMARY-KEY-字段列表-字段列表可以是一个字段，也可以是多个字段，如果是多"><a href="#ALTER-TABLE-表名称-ADD-PRIMARY-KEY-字段列表-字段列表可以是一个字段，也可以是多个字段，如果是多" class="headerlink" title="ALTER TABLE 表名称 ADD PRIMARY KEY(字段列表); #字段列表可以是一个字段，也可以是多个字段，如果是多"></a>ALTER TABLE 表名称 ADD PRIMARY KEY(字段列表); #字段列表可以是一个字段，也可以是多个字段，如果是多</h5><h5 id="个字段的话，是复合主键"><a href="#个字段的话，是复合主键" class="headerlink" title="个字段的话，是复合主键"></a>个字段的话，是复合主键</h5><h3 id="4-5-关于复合主键"><a href="#4-5-关于复合主键" class="headerlink" title="4. 5 关于复合主键"></a>4. 5 关于复合主键</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student ADD PRIMARY KEY (sid);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp5 ADD PRIMARY KEY(NAME,pwd);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型,</span><br><span class="line">字段名 数据类型,</span><br><span class="line">primary key(字段名1,字段名2)  #表示字段 1 和字段 2 的组合是唯一的，也可以有更多个字段</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="学生表-1"><a href="#学生表-1" class="headerlink" title="#学生表"></a>#学生表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">sid int primary key,  #学号</span><br><span class="line">sname varchar( 20 ) #学生姓名</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="课程表-1"><a href="#课程表-1" class="headerlink" title="#课程表"></a>#课程表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table course(</span><br><span class="line">cid int primary key,  #课程编号</span><br><span class="line">cname varchar( 20 ) #课程名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="选课表-1"><a href="#选课表-1" class="headerlink" title="#选课表"></a>#选课表</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table student_course(</span><br><span class="line">sid int,</span><br><span class="line">cid int,</span><br><span class="line">score int,</span><br><span class="line">primary key(sid,cid)  #复合主键</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values( 1 ,&#x27;张三&#x27;),( 2 ,&#x27;李四&#x27;);</span><br><span class="line">insert into course values( 1001 ,&#x27;Java&#x27;),( 1002 ,&#x27;MySQL&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+-----+-------+</span><br><span class="line">| sid | sname |</span><br><span class="line">+-----+-------+</span><br><span class="line">| 1 | 张三 |</span><br><span class="line">| 2 | 李四 |</span><br><span class="line">+-----+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from course;</span><br><span class="line">+------+-------+</span><br><span class="line">| cid | cname |</span><br><span class="line">+------+-------+</span><br><span class="line">| 1001 | Java |</span><br><span class="line">| 1002 | MySQL |</span><br><span class="line">+------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values( 1 , 1001 , 89 ),( 1 , 1002 , 90 ),( 2 , 1001 , 88 ),( 2 , 1002 , 56 );</span><br></pre></td></tr></table></figure>

<h4 id="再举例"><a href="#再举例" class="headerlink" title="再举例"></a>再举例</h4><h3 id="4-6-删除主键约束"><a href="#4-6-删除主键约束" class="headerlink" title="4. 6 删除主键约束"></a>4. 6 删除主键约束</h3><h4 id="举例：-7"><a href="#举例：-7" class="headerlink" title="举例："></a>举例：</h4><h4 id="说明：删除主键约束，不需要指定主键名，因为一个表只有一个主键，删除主键约束后，非空还存"><a href="#说明：删除主键约束，不需要指定主键名，因为一个表只有一个主键，删除主键约束后，非空还存" class="headerlink" title="说明：删除主键约束，不需要指定主键名，因为一个表只有一个主键，删除主键约束后，非空还存"></a>说明：删除主键约束，不需要指定主键名，因为一个表只有一个主键，删除主键约束后，非空还存</h4><h4 id="在。"><a href="#在。" class="headerlink" title="在。"></a>在。</h4><h2 id="5-自增列：AUTO-INCREMENT"><a href="#5-自增列：AUTO-INCREMENT" class="headerlink" title="5. 自增列：AUTO_INCREMENT"></a>5. 自增列：AUTO_INCREMENT</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student_course;</span><br><span class="line">+-----+------+-------+</span><br><span class="line">| sid | cid | score |</span><br><span class="line">+-----+------+-------+</span><br><span class="line">| 1 | 1001 | 89 |</span><br><span class="line">| 1 | 1002 | 90 |</span><br><span class="line">| 2 | 1001 | 88 |</span><br><span class="line">| 2 | 1002 | 56 |</span><br><span class="line">+-----+------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values( 1 , 1001 , 100 );</span><br><span class="line">ERROR 1062 ( 23000 ): Duplicate entry &#x27;1-1001&#x27; for key &#x27;PRIMARY&#x27;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc student_course;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| sid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| cid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| score | int( 11 ) | YES | | NULL | |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp6(</span><br><span class="line">id INT NOT NULL,</span><br><span class="line">NAME VARCHAR( 20 ),</span><br><span class="line">pwd VARCHAR( 15 ),</span><br><span class="line">CONSTRAINT emp7_pk PRIMARY KEY(NAME,pwd)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 drop primary key;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp5 DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>

<h3 id="5-1-作用"><a href="#5-1-作用" class="headerlink" title="5. 1 作用"></a>5. 1 作用</h3><h4 id="某个字段的值自增"><a href="#某个字段的值自增" class="headerlink" title="某个字段的值自增"></a>某个字段的值自增</h4><h3 id="5-2-关键字"><a href="#5-2-关键字" class="headerlink" title="5. 2 关键字"></a>5. 2 关键字</h3><h4 id="auto-increment"><a href="#auto-increment" class="headerlink" title="auto_increment"></a>auto_increment</h4><h3 id="5-3-特点和要求"><a href="#5-3-特点和要求" class="headerlink" title="5. 3 特点和要求"></a>5. 3 特点和要求</h3><h4 id="（-1-）一个表最多只能有一个自增长列"><a href="#（-1-）一个表最多只能有一个自增长列" class="headerlink" title="（ 1 ）一个表最多只能有一个自增长列"></a>（ 1 ）一个表最多只能有一个自增长列</h4><h4 id="（-2-）当需要产生唯一标识符或顺序值时，可设置自增长"><a href="#（-2-）当需要产生唯一标识符或顺序值时，可设置自增长" class="headerlink" title="（ 2 ）当需要产生唯一标识符或顺序值时，可设置自增长"></a>（ 2 ）当需要产生唯一标识符或顺序值时，可设置自增长</h4><h4 id="（-3-）自增长列约束的列必须是键列（主键列，唯一键列）"><a href="#（-3-）自增长列约束的列必须是键列（主键列，唯一键列）" class="headerlink" title="（ 3 ）自增长列约束的列必须是键列（主键列，唯一键列）"></a>（ 3 ）自增长列约束的列必须是键列（主键列，唯一键列）</h4><h4 id="（-4-）自增约束的列的数据类型必须是整数类型"><a href="#（-4-）自增约束的列的数据类型必须是整数类型" class="headerlink" title="（ 4 ）自增约束的列的数据类型必须是整数类型"></a>（ 4 ）自增约束的列的数据类型必须是整数类型</h4><h4 id="（-5-）如果自增列指定了-0-和-null，会在当前最大值的基础上自增；如果自增列手动指定了具体值，直接"><a href="#（-5-）如果自增列指定了-0-和-null，会在当前最大值的基础上自增；如果自增列手动指定了具体值，直接" class="headerlink" title="（ 5 ）如果自增列指定了 0 和 null，会在当前最大值的基础上自增；如果自增列手动指定了具体值，直接"></a>（ 5 ）如果自增列指定了 0 和 null，会在当前最大值的基础上自增；如果自增列手动指定了具体值，直接</h4><h4 id="赋值为具体值。"><a href="#赋值为具体值。" class="headerlink" title="赋值为具体值。"></a>赋值为具体值。</h4><h4 id="错误演示："><a href="#错误演示：" class="headerlink" title="错误演示："></a>错误演示：</h4><h3 id="5-4-如何指定自增约束"><a href="#5-4-如何指定自增约束" class="headerlink" title="5. 4 如何指定自增约束"></a>5. 4 如何指定自增约束</h3><h4 id="（-1-）建表时-2"><a href="#（-1-）建表时-2" class="headerlink" title="（ 1 ）建表时"></a>（ 1 ）建表时</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">eid int auto_increment,</span><br><span class="line">ename varchar( 20 )</span><br><span class="line">);</span><br><span class="line"># ERROR 1075 (42000): Incorrect table definition; there can be only one auto column</span><br><span class="line">and it must be defined as a key</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">eid int primary key,</span><br><span class="line">ename varchar( 20 ) unique key auto_increment</span><br><span class="line">);</span><br><span class="line"># ERROR 1063 (42000): Incorrect column specifier for column &#x27;ename&#x27; 因为ename不是整数类</span><br><span class="line">型</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型 primary key auto_increment,</span><br><span class="line">字段名 数据类型 unique key not null,</span><br><span class="line">字段名 数据类型 unique key,</span><br><span class="line">字段名 数据类型 not null default 默认值,</span><br><span class="line">);</span><br><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型 default 默认值 ,</span><br><span class="line">字段名 数据类型 unique key auto_increment,</span><br><span class="line">字段名 数据类型 not null default 默认值,,</span><br><span class="line">primary key(字段名)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">eid int primary key auto_increment,</span><br><span class="line">ename varchar( 20 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="（-2-）建表后-1"><a href="#（-2-）建表后-1" class="headerlink" title="（ 2 ）建表后"></a>（ 2 ）建表后</h4><h4 id="例如："><a href="#例如：" class="headerlink" title="例如："></a>例如：</h4><h3 id="5-5-如何删除自增约束"><a href="#5-5-如何删除自增约束" class="headerlink" title="5. 5 如何删除自增约束"></a>5. 5 如何删除自增约束</h3><h3 id="5-6-MySQL-8-0-新特性—自增变量的持久化"><a href="#5-6-MySQL-8-0-新特性—自增变量的持久化" class="headerlink" title="5. 6 MySQL 8. 0 新特性—自增变量的持久化"></a>5. 6 MySQL 8. 0 新特性—自增变量的持久化</h3><h4 id="在MySQL-8-0之前，自增主键AUTO-INCREMENT的值如果大于max-primary-key-1，在MySQL重启后，会重"><a href="#在MySQL-8-0之前，自增主键AUTO-INCREMENT的值如果大于max-primary-key-1，在MySQL重启后，会重" class="headerlink" title="在MySQL 8.0之前，自增主键AUTO_INCREMENT的值如果大于max(primary key)+1，在MySQL重启后，会重"></a>在MySQL 8.0之前，自增主键AUTO_INCREMENT的值如果大于max(primary key)+1，在MySQL重启后，会重</h4><h4 id="置AUTO-INCREMENT-max-primary-key-1，这种现象在某些情况下会导致业务主键冲突或者其他难以发"><a href="#置AUTO-INCREMENT-max-primary-key-1，这种现象在某些情况下会导致业务主键冲突或者其他难以发" class="headerlink" title="置AUTO_INCREMENT&#x3D;max(primary key)+1，这种现象在某些情况下会导致业务主键冲突或者其他难以发"></a>置AUTO_INCREMENT&#x3D;max(primary key)+1，这种现象在某些情况下会导致业务主键冲突或者其他难以发</h4><h4 id="现的问题。-下面通过案例来对比不同的版本中自增变量是否持久化。-在MySQL-5-7版本中，测试步骤如"><a href="#现的问题。-下面通过案例来对比不同的版本中自增变量是否持久化。-在MySQL-5-7版本中，测试步骤如" class="headerlink" title="现的问题。 下面通过案例来对比不同的版本中自增变量是否持久化。 在MySQL 5.7版本中，测试步骤如"></a>现的问题。 下面通过案例来对比不同的版本中自增变量是否持久化。 在MySQL 5.7版本中，测试步骤如</h4><h4 id="下：-创建的数据表中包含自增主键的id字段，语句如下："><a href="#下：-创建的数据表中包含自增主键的id字段，语句如下：" class="headerlink" title="下： 创建的数据表中包含自增主键的id字段，语句如下："></a>下： 创建的数据表中包含自增主键的id字段，语句如下：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | auto_increment |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 数据类型 auto_increment;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">eid int primary key ,</span><br><span class="line">ename varchar( 20 )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify eid int auto_increment;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | auto_increment |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#alter table 表名称 modify 字段名 数据类型 auto_increment;#给这个字段增加自增约束</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 数据类型; #去掉auto_increment相当于删除</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify eid int;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="插入-4-个空值，执行如下："><a href="#插入-4-个空值，执行如下：" class="headerlink" title="插入 4 个空值，执行如下："></a>插入 4 个空值，执行如下：</h4><h4 id="查询数据表test1中的数据，结果如下："><a href="#查询数据表test1中的数据，结果如下：" class="headerlink" title="查询数据表test1中的数据，结果如下："></a>查询数据表test1中的数据，结果如下：</h4><h4 id="删除id为-4-的记录，语句如下："><a href="#删除id为-4-的记录，语句如下：" class="headerlink" title="删除id为 4 的记录，语句如下："></a>删除id为 4 的记录，语句如下：</h4><h4 id="再次插入一个空值，语句如下："><a href="#再次插入一个空值，语句如下：" class="headerlink" title="再次插入一个空值，语句如下："></a>再次插入一个空值，语句如下：</h4><h4 id="查询此时数据表test1中的数据，结果如下："><a href="#查询此时数据表test1中的数据，结果如下：" class="headerlink" title="查询此时数据表test1中的数据，结果如下："></a>查询此时数据表test1中的数据，结果如下：</h4><h4 id="从结果可以看出，虽然删除了id为-4-的记录，但是再次插入空值时，并没有重用被删除的-4-，而是分配了"><a href="#从结果可以看出，虽然删除了id为-4-的记录，但是再次插入空值时，并没有重用被删除的-4-，而是分配了" class="headerlink" title="从结果可以看出，虽然删除了id为 4 的记录，但是再次插入空值时，并没有重用被删除的 4 ，而是分配了"></a>从结果可以看出，虽然删除了id为 4 的记录，但是再次插入空值时，并没有重用被删除的 4 ，而是分配了</h4><h4 id="5-。-删除id为-5-的记录，结果如下："><a href="#5-。-删除id为-5-的记录，结果如下：" class="headerlink" title="5 。 删除id为 5 的记录，结果如下："></a>5 。 删除id为 5 的记录，结果如下：</h4><h4 id="重启数据库-，重新插入一个空值。"><a href="#重启数据库-，重新插入一个空值。" class="headerlink" title="重启数据库 ，重新插入一个空值。"></a>重启数据库 ，重新插入一个空值。</h4><h4 id="再次查询数据表test1中的数据，结果如下："><a href="#再次查询数据表test1中的数据，结果如下：" class="headerlink" title="再次查询数据表test1中的数据，结果如下："></a>再次查询数据表test1中的数据，结果如下：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test1(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test</span><br><span class="line">VALUES( 0 ),( 0 ),( 0 ),( 0 );</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">| 4 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM test1 WHERE id = 4 ;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test1 VALUES( 0 );</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">| 5 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM test1 where id= 5 ;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test1 values( 0 );</span><br></pre></td></tr></table></figure>

<h4 id="从结果可以看出，新插入的-0-值分配的是-4-，按照重启前的操作逻辑，此处应该分配-6-。出现上述结果的主"><a href="#从结果可以看出，新插入的-0-值分配的是-4-，按照重启前的操作逻辑，此处应该分配-6-。出现上述结果的主" class="headerlink" title="从结果可以看出，新插入的 0 值分配的是 4 ，按照重启前的操作逻辑，此处应该分配 6 。出现上述结果的主"></a>从结果可以看出，新插入的 0 值分配的是 4 ，按照重启前的操作逻辑，此处应该分配 6 。出现上述结果的主</h4><h4 id="要原因是自增主键没有持久化。-在MySQL-5-7-系统中，对于自增主键的分配规则，是由InnoDB数据字典"><a href="#要原因是自增主键没有持久化。-在MySQL-5-7-系统中，对于自增主键的分配规则，是由InnoDB数据字典" class="headerlink" title="要原因是自增主键没有持久化。 在MySQL 5. 7 系统中，对于自增主键的分配规则，是由InnoDB数据字典"></a>要原因是自增主键没有持久化。 在MySQL 5. 7 系统中，对于自增主键的分配规则，是由InnoDB数据字典</h4><h4 id="内部一个计数器来决定的，而该计数器只在内存中维护，并不会持久化到磁盘中。当数据库重启时，该"><a href="#内部一个计数器来决定的，而该计数器只在内存中维护，并不会持久化到磁盘中。当数据库重启时，该" class="headerlink" title="内部一个计数器来决定的，而该计数器只在内存中维护，并不会持久化到磁盘中。当数据库重启时，该"></a>内部一个计数器来决定的，而该计数器只在内存中维护，并不会持久化到磁盘中。当数据库重启时，该</h4><h4 id="计数器会被初始化。"><a href="#计数器会被初始化。" class="headerlink" title="计数器会被初始化。"></a>计数器会被初始化。</h4><h4 id="在MySQL-8-0-版本中，上述测试步骤最后一步的结果如下："><a href="#在MySQL-8-0-版本中，上述测试步骤最后一步的结果如下：" class="headerlink" title="在MySQL 8. 0 版本中，上述测试步骤最后一步的结果如下："></a>在MySQL 8. 0 版本中，上述测试步骤最后一步的结果如下：</h4><h4 id="从结果可以看出，自增变量已经持久化了。"><a href="#从结果可以看出，自增变量已经持久化了。" class="headerlink" title="从结果可以看出，自增变量已经持久化了。"></a>从结果可以看出，自增变量已经持久化了。</h4><h4 id="MySQL-8-0-将自增主键的计数器持久化到重做日志中。每次计数器发生改变，都会将其写入重做日志"><a href="#MySQL-8-0-将自增主键的计数器持久化到重做日志中。每次计数器发生改变，都会将其写入重做日志" class="headerlink" title="MySQL 8. 0 将自增主键的计数器持久化到重做日志中。每次计数器发生改变，都会将其写入重做日志"></a>MySQL 8. 0 将自增主键的计数器持久化到重做日志中。每次计数器发生改变，都会将其写入重做日志</h4><h4 id="中。如果数据库重启，InnoDB会根据重做日志中的信息来初始化计数器的内存值。"><a href="#中。如果数据库重启，InnoDB会根据重做日志中的信息来初始化计数器的内存值。" class="headerlink" title="中。如果数据库重启，InnoDB会根据重做日志中的信息来初始化计数器的内存值。"></a>中。如果数据库重启，InnoDB会根据重做日志中的信息来初始化计数器的内存值。</h4><h2 id="6-FOREIGN-KEY-约束"><a href="#6-FOREIGN-KEY-约束" class="headerlink" title="6. FOREIGN KEY 约束"></a>6. FOREIGN KEY 约束</h2><h3 id="6-1-作用"><a href="#6-1-作用" class="headerlink" title="6. 1 作用"></a>6. 1 作用</h3><h4 id="限定某个表的某个字段的引用完整性。"><a href="#限定某个表的某个字段的引用完整性。" class="headerlink" title="限定某个表的某个字段的引用完整性。"></a>限定某个表的某个字段的引用完整性。</h4><h4 id="比如：员工表的员工所在部门的选择，必须在部门表能找到对应的部分。"><a href="#比如：员工表的员工所在部门的选择，必须在部门表能找到对应的部分。" class="headerlink" title="比如：员工表的员工所在部门的选择，必须在部门表能找到对应的部分。"></a>比如：员工表的员工所在部门的选择，必须在部门表能找到对应的部分。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">| 4 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">| 6 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="6-2-关键字"><a href="#6-2-关键字" class="headerlink" title="6. 2 关键字"></a>6. 2 关键字</h3><h4 id="FOREIGN-KEY"><a href="#FOREIGN-KEY" class="headerlink" title="FOREIGN KEY"></a>FOREIGN KEY</h4><h3 id="6-3-主表和从表-父表和子表"><a href="#6-3-主表和从表-父表和子表" class="headerlink" title="6. 3 主表和从表&#x2F;父表和子表"></a>6. 3 主表和从表&#x2F;父表和子表</h3><h4 id="主表（父表）：被引用的表，被参考的表"><a href="#主表（父表）：被引用的表，被参考的表" class="headerlink" title="主表（父表）：被引用的表，被参考的表"></a>主表（父表）：被引用的表，被参考的表</h4><h4 id="从表（子表）：引用别人的表，参考别人的表"><a href="#从表（子表）：引用别人的表，参考别人的表" class="headerlink" title="从表（子表）：引用别人的表，参考别人的表"></a>从表（子表）：引用别人的表，参考别人的表</h4><h4 id="例如：员工表的员工所在部门这个字段的值要参考部门表：部门表是主表，员工表是从表。"><a href="#例如：员工表的员工所在部门这个字段的值要参考部门表：部门表是主表，员工表是从表。" class="headerlink" title="例如：员工表的员工所在部门这个字段的值要参考部门表：部门表是主表，员工表是从表。"></a>例如：员工表的员工所在部门这个字段的值要参考部门表：部门表是主表，员工表是从表。</h4><h4 id="例如：学生表、课程表、选课表：选课表的学生和课程要分别参考学生表和课程表，学生表和课程表是"><a href="#例如：学生表、课程表、选课表：选课表的学生和课程要分别参考学生表和课程表，学生表和课程表是" class="headerlink" title="例如：学生表、课程表、选课表：选课表的学生和课程要分别参考学生表和课程表，学生表和课程表是"></a>例如：学生表、课程表、选课表：选课表的学生和课程要分别参考学生表和课程表，学生表和课程表是</h4><h4 id="主表，选课表是从表。"><a href="#主表，选课表是从表。" class="headerlink" title="主表，选课表是从表。"></a>主表，选课表是从表。</h4><h3 id="6-4-特点"><a href="#6-4-特点" class="headerlink" title="6. 4 特点"></a>6. 4 特点</h3><h4 id="（-1-）从表的外键列，必须引用-参考主表的主键或唯一约束的列"><a href="#（-1-）从表的外键列，必须引用-参考主表的主键或唯一约束的列" class="headerlink" title="（ 1 ）从表的外键列，必须引用&#x2F;参考主表的主键或唯一约束的列"></a>（ 1 ）从表的外键列，必须引用&#x2F;参考主表的主键或唯一约束的列</h4><h4 id="为什么？因为被依赖-被参考的值必须是唯一的"><a href="#为什么？因为被依赖-被参考的值必须是唯一的" class="headerlink" title="为什么？因为被依赖&#x2F;被参考的值必须是唯一的"></a>为什么？因为被依赖&#x2F;被参考的值必须是唯一的</h4><h4 id="（-2-）在创建外键约束时，如果不给外键约束命名，-默认名不是列名，而是自动产生一个外键名-（例如"><a href="#（-2-）在创建外键约束时，如果不给外键约束命名，-默认名不是列名，而是自动产生一个外键名-（例如" class="headerlink" title="（ 2 ）在创建外键约束时，如果不给外键约束命名， 默认名不是列名，而是自动产生一个外键名 （例如"></a>（ 2 ）在创建外键约束时，如果不给外键约束命名， 默认名不是列名，而是自动产生一个外键名 （例如</h4><h4 id="student-ibfk-1-），也可以指定外键约束名。"><a href="#student-ibfk-1-），也可以指定外键约束名。" class="headerlink" title="student_ibfk_1;），也可以指定外键约束名。"></a>student_ibfk_1;），也可以指定外键约束名。</h4><h4 id="（-3-）创建-CREATE-表时就指定外键约束的话，先创建主表，再创建从表"><a href="#（-3-）创建-CREATE-表时就指定外键约束的话，先创建主表，再创建从表" class="headerlink" title="（ 3 ）创建(CREATE)表时就指定外键约束的话，先创建主表，再创建从表"></a>（ 3 ）创建(CREATE)表时就指定外键约束的话，先创建主表，再创建从表</h4><h4 id="（-4-）删表时，先删从表（或先删除外键约束），再删除主表"><a href="#（-4-）删表时，先删从表（或先删除外键约束），再删除主表" class="headerlink" title="（ 4 ）删表时，先删从表（或先删除外键约束），再删除主表"></a>（ 4 ）删表时，先删从表（或先删除外键约束），再删除主表</h4><h4 id="（-5-）当主表的记录被从表参照时，主表的记录将不允许删除，如果要删除数据，需要先删除从表中依赖"><a href="#（-5-）当主表的记录被从表参照时，主表的记录将不允许删除，如果要删除数据，需要先删除从表中依赖" class="headerlink" title="（ 5 ）当主表的记录被从表参照时，主表的记录将不允许删除，如果要删除数据，需要先删除从表中依赖"></a>（ 5 ）当主表的记录被从表参照时，主表的记录将不允许删除，如果要删除数据，需要先删除从表中依赖</h4><h4 id="该记录的数据，然后才可以删除主表的数据"><a href="#该记录的数据，然后才可以删除主表的数据" class="headerlink" title="该记录的数据，然后才可以删除主表的数据"></a>该记录的数据，然后才可以删除主表的数据</h4><h4 id="（-6-）在“从表”中指定外键约束，并且一个表可以建立多个外键约束"><a href="#（-6-）在“从表”中指定外键约束，并且一个表可以建立多个外键约束" class="headerlink" title="（ 6 ）在“从表”中指定外键约束，并且一个表可以建立多个外键约束"></a>（ 6 ）在“从表”中指定外键约束，并且一个表可以建立多个外键约束</h4><h4 id="（-7-）从表的外键列与主表被参照的列名字可以不相同，但是数据类型必须一样，逻辑意义一致。如果类"><a href="#（-7-）从表的外键列与主表被参照的列名字可以不相同，但是数据类型必须一样，逻辑意义一致。如果类" class="headerlink" title="（ 7 ）从表的外键列与主表被参照的列名字可以不相同，但是数据类型必须一样，逻辑意义一致。如果类"></a>（ 7 ）从表的外键列与主表被参照的列名字可以不相同，但是数据类型必须一样，逻辑意义一致。如果类</h4><h4 id="型不一样，创建子表时，就会出现错误“ERROR-1005-HY000-Can’t-create"><a href="#型不一样，创建子表时，就会出现错误“ERROR-1005-HY000-Can’t-create" class="headerlink" title="型不一样，创建子表时，就会出现错误“ERROR 1005 (HY000): Can’t create"></a>型不一样，创建子表时，就会出现错误“ERROR 1005 (HY000): Can’t create</h4><h4 id="table’database-tablename’-errno-150-”。"><a href="#table’database-tablename’-errno-150-”。" class="headerlink" title="table’database.tablename’(errno: 150)”。"></a>table’database.tablename’(errno: 150)”。</h4><h4 id="例如：都是表示部门编号，都是int类型。"><a href="#例如：都是表示部门编号，都是int类型。" class="headerlink" title="例如：都是表示部门编号，都是int类型。"></a>例如：都是表示部门编号，都是int类型。</h4><h4 id="（-8-）-当创建外键约束时，系统默认会在所在的列上建立对应的普通索引-。但是索引名是外键的约束"><a href="#（-8-）-当创建外键约束时，系统默认会在所在的列上建立对应的普通索引-。但是索引名是外键的约束" class="headerlink" title="（ 8 ） 当创建外键约束时，系统默认会在所在的列上建立对应的普通索引 。但是索引名是外键的约束"></a>（ 8 ） 当创建外键约束时，系统默认会在所在的列上建立对应的普通索引 。但是索引名是外键的约束</h4><h4 id="名。（根据外键查询效率很高）"><a href="#名。（根据外键查询效率很高）" class="headerlink" title="名。（根据外键查询效率很高）"></a>名。（根据外键查询效率很高）</h4><h4 id="（-9-）删除外键约束后，必须手动删除对应的索引"><a href="#（-9-）删除外键约束后，必须手动删除对应的索引" class="headerlink" title="（ 9 ）删除外键约束后，必须手动删除对应的索引"></a>（ 9 ）删除外键约束后，必须手动删除对应的索引</h4><h3 id="6-5-添加外键约束"><a href="#6-5-添加外键约束" class="headerlink" title="6. 5 添加外键约束"></a>6. 5 添加外键约束</h3><h4 id="（-1-）建表时-3"><a href="#（-1-）建表时-3" class="headerlink" title="（ 1 ）建表时"></a>（ 1 ）建表时</h4><h4 id="（-2-）建表后-2"><a href="#（-2-）建表后-2" class="headerlink" title="（ 2 ）建表后"></a>（ 2 ）建表后</h4><h4 id="一般情况下，表与表的关联都是提前设计好了的，因此，会在创建表的时候就把外键约束定义好。不"><a href="#一般情况下，表与表的关联都是提前设计好了的，因此，会在创建表的时候就把外键约束定义好。不" class="headerlink" title="一般情况下，表与表的关联都是提前设计好了的，因此，会在创建表的时候就把外键约束定义好。不"></a>一般情况下，表与表的关联都是提前设计好了的，因此，会在创建表的时候就把外键约束定义好。不</h4><h4 id="过，如果需要修改表的设计（比如添加新的字段，增加新的关联关系），但没有预先定义外键约束，那"><a href="#过，如果需要修改表的设计（比如添加新的字段，增加新的关联关系），但没有预先定义外键约束，那" class="headerlink" title="过，如果需要修改表的设计（比如添加新的字段，增加新的关联关系），但没有预先定义外键约束，那"></a>过，如果需要修改表的设计（比如添加新的字段，增加新的关联关系），但没有预先定义外键约束，那</h4><h4 id="么，就要用修改表的方式来补充定义。"><a href="#么，就要用修改表的方式来补充定义。" class="headerlink" title="么，就要用修改表的方式来补充定义。"></a>么，就要用修改表的方式来补充定义。</h4><h4 id="格式："><a href="#格式：" class="headerlink" title="格式："></a>格式：</h4><h4 id="举例：-8"><a href="#举例：-8" class="headerlink" title="举例："></a>举例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table 主表名称(</span><br><span class="line">字段 1 数据类型 primary key,</span><br><span class="line">字段 2 数据类型</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 从表名称(</span><br><span class="line">字段 1 数据类型 primary key,</span><br><span class="line">字段 2 数据类型,</span><br><span class="line">[CONSTRAINT &lt;外键约束名称&gt;] FOREIGN KEY（从表的某个字段) references 主表名(被参考字段)</span><br><span class="line">);</span><br><span class="line">#(从表的某个字段)的数据类型必须与主表名(被参考字段)的数据类型一致，逻辑意义也一样</span><br><span class="line">#(从表的某个字段)的字段名可以与主表名(被参考字段)的字段名一样，也可以不一样</span><br></pre></td></tr></table></figure>
<h5 id="–-FOREIGN-KEY-在表级指定子表中的列"><a href="#–-FOREIGN-KEY-在表级指定子表中的列" class="headerlink" title="– FOREIGN KEY: 在表级指定子表中的列"></a>– FOREIGN KEY: 在表级指定子表中的列</h5><h5 id="–-REFERENCES-标示在父表中的列"><a href="#–-REFERENCES-标示在父表中的列" class="headerlink" title="– REFERENCES: 标示在父表中的列"></a>– REFERENCES: 标示在父表中的列</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept( #主表</span><br><span class="line">did int primary key, #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table emp(#从表</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">deptid int, #员工所在的部门</span><br><span class="line">foreign key (deptid) references dept(did) #在从表中指定外键约束</span><br><span class="line">#emp表的deptid和和dept表的did的数据类型一致，意义都是表示部门的编号</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（ 1 ）主表dept必须先创建成功，然后才能创建emp表，指定外键成功。</span><br><span class="line">（ 2 ）删除表时，先删除从表emp，再删除主表dept</span><br></pre></td></tr></table></figure>
<h5 id="ALTER-TABLE-从表名-ADD-CONSTRAINT-约束名-FOREIGN-KEY-从表的字段-REFERENCES-主表名-被引用"><a href="#ALTER-TABLE-从表名-ADD-CONSTRAINT-约束名-FOREIGN-KEY-从表的字段-REFERENCES-主表名-被引用" class="headerlink" title="ALTER TABLE 从表名 ADD [CONSTRAINT 约束名] FOREIGN KEY (从表的字段) REFERENCES 主表名(被引用"></a>ALTER TABLE 从表名 ADD [CONSTRAINT 约束名] FOREIGN KEY (从表的字段) REFERENCES 主表名(被引用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段) [on update xx][on delete xx];</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">ADD [CONSTRAINT emp_dept_id_fk] FOREIGN KEY(dept_id) REFERENCES dept(dept_id);</span><br></pre></td></tr></table></figure>

<h4 id="举例：-9"><a href="#举例：-9" class="headerlink" title="举例："></a>举例：</h4><h3 id="6-6-演示问题"><a href="#6-6-演示问题" class="headerlink" title="6. 6 演示问题"></a>6. 6 演示问题</h3><h4 id="（-1-）失败：不是键列"><a href="#（-1-）失败：不是键列" class="headerlink" title="（ 1 ）失败：不是键列"></a>（ 1 ）失败：不是键列</h4><h4 id="（-2-）失败：数据类型不一致"><a href="#（-2-）失败：数据类型不一致" class="headerlink" title="（ 2 ）失败：数据类型不一致"></a>（ 2 ）失败：数据类型不一致</h4><h4 id="（-3-）成功，两个表字段名一样"><a href="#（-3-）成功，两个表字段名一样" class="headerlink" title="（ 3 ）成功，两个表字段名一样"></a>（ 3 ）成功，两个表字段名一样</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">did int primary key, #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">deptid int #员工所在的部门</span><br><span class="line">);</span><br><span class="line">#这两个表创建时，没有指定外键的话，那么创建顺序是随意</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table emp add foreign key (deptid) references dept(did);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">did int , #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">deptid int, #员工所在的部门</span><br><span class="line">foreign key (deptid) references dept(did)</span><br><span class="line">);</span><br><span class="line">#ERROR 1215 (HY000): Cannot add foreign key constraint 原因是dept的did不是键列</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">did int primary key, #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">deptid char, #员工所在的部门</span><br><span class="line">foreign key (deptid) references dept(did)</span><br><span class="line">);</span><br><span class="line">#ERROR 1215 (HY000): Cannot add foreign key constraint 原因是从表的deptid字段和主表的did字</span><br><span class="line">段的数据类型不一致，并且要它俩的逻辑意义一致</span><br></pre></td></tr></table></figure>

<h4 id="（-4-）添加、删除、修改问题"><a href="#（-4-）添加、删除、修改问题" class="headerlink" title="（ 4 ）添加、删除、修改问题"></a>（ 4 ）添加、删除、修改问题</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">did int primary key, #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">did int, #员工所在的部门</span><br><span class="line">foreign key (did) references dept(did)</span><br><span class="line">#emp表的deptid和和dept表的did的数据类型一致，意义都是表示部门的编号</span><br><span class="line">#是否重名没问题，因为两个did在不同的表中</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">did int primary key, #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">deptid int, #员工所在的部门</span><br><span class="line">foreign key (deptid) references dept(did)</span><br><span class="line">#emp表的deptid和和dept表的did的数据类型一致，意义都是表示部门的编号</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values( 1001 ,&#x27;教学部&#x27;);</span><br><span class="line">insert into dept values( 1003 , &#x27;财务部&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into emp values( 1 ,&#x27;张三&#x27;, 1001 ); #添加从表记录成功，在添加这条记录时，要求部门表有 1001 部门</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">insert into emp values( 2 ,&#x27;李四&#x27;, 1005 );#添加从表记录失败</span><br><span class="line">ERROR 1452 ( 23000 ): Cannot add（添加） or update（修改） a child row: a foreign key</span><br><span class="line">constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`)</span><br><span class="line">REFERENCES `dept` (`did`)) 从表emp添加记录失败，因为主表dept没有 1005 部门</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | 教学部 |</span><br><span class="line">| 1003 | 财务部 |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | 张三 | 1001 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="总结：约束关系是针对双方的"><a href="#总结：约束关系是针对双方的" class="headerlink" title="总结：约束关系是针对双方的"></a>总结：约束关系是针对双方的</h4><h4 id="添加了外键约束后，主表的修改和删除数据受约束"><a href="#添加了外键约束后，主表的修改和删除数据受约束" class="headerlink" title="添加了外键约束后，主表的修改和删除数据受约束"></a>添加了外键约束后，主表的修改和删除数据受约束</h4><h4 id="添加了外键约束后，从表的添加和修改数据受约束"><a href="#添加了外键约束后，从表的添加和修改数据受约束" class="headerlink" title="添加了外键约束后，从表的添加和修改数据受约束"></a>添加了外键约束后，从表的添加和修改数据受约束</h4><h4 id="在从表上建立外键，要求主表必须存在"><a href="#在从表上建立外键，要求主表必须存在" class="headerlink" title="在从表上建立外键，要求主表必须存在"></a>在从表上建立外键，要求主表必须存在</h4><h4 id="删除主表时，要求从表从表先删除，或将从表中外键引用该主表的关系先删除"><a href="#删除主表时，要求从表从表先删除，或将从表中外键引用该主表的关系先删除" class="headerlink" title="删除主表时，要求从表从表先删除，或将从表中外键引用该主表的关系先删除"></a>删除主表时，要求从表从表先删除，或将从表中外键引用该主表的关系先删除</h4><h3 id="6-7-约束等级"><a href="#6-7-约束等级" class="headerlink" title="6. 7 约束等级"></a>6. 7 约束等级</h3><h4 id="Cascade方式：在父表上update-delete记录时，同步update-delete掉子表的匹配记录"><a href="#Cascade方式：在父表上update-delete记录时，同步update-delete掉子表的匹配记录" class="headerlink" title="Cascade方式：在父表上update&#x2F;delete记录时，同步update&#x2F;delete掉子表的匹配记录"></a>Cascade方式：在父表上update&#x2F;delete记录时，同步update&#x2F;delete掉子表的匹配记录</h4><h4 id="Set-null方式：在父表上update-delete记录时，将子表上匹配记录的列设为null，但是要注意子"><a href="#Set-null方式：在父表上update-delete记录时，将子表上匹配记录的列设为null，但是要注意子" class="headerlink" title="Set null方式：在父表上update&#x2F;delete记录时，将子表上匹配记录的列设为null，但是要注意子"></a>Set null方式：在父表上update&#x2F;delete记录时，将子表上匹配记录的列设为null，但是要注意子</h4><h4 id="表的外键列不能为not-null"><a href="#表的外键列不能为not-null" class="headerlink" title="表的外键列不能为not null"></a>表的外键列不能为not null</h4><h4 id="No-action方式：如果子表中有匹配的记录，则不允许对父表对应候选键进行update-delete操作"><a href="#No-action方式：如果子表中有匹配的记录，则不允许对父表对应候选键进行update-delete操作" class="headerlink" title="No action方式：如果子表中有匹配的记录，则不允许对父表对应候选键进行update&#x2F;delete操作"></a>No action方式：如果子表中有匹配的记录，则不允许对父表对应候选键进行update&#x2F;delete操作</h4><h4 id="Restrict方式：同no-action，-都是立即检查外键约束"><a href="#Restrict方式：同no-action，-都是立即检查外键约束" class="headerlink" title="Restrict方式：同no action， 都是立即检查外键约束"></a>Restrict方式：同no action， 都是立即检查外键约束</h4><h4 id="Set-default方式（在可视化工具SQLyog中可能显示空白）：父表有变更时，子表将外键列设置"><a href="#Set-default方式（在可视化工具SQLyog中可能显示空白）：父表有变更时，子表将外键列设置" class="headerlink" title="Set default方式（在可视化工具SQLyog中可能显示空白）：父表有变更时，子表将外键列设置"></a>Set default方式（在可视化工具SQLyog中可能显示空白）：父表有变更时，子表将外键列设置</h4><h4 id="成一个默认的值，但Innodb不能识别"><a href="#成一个默认的值，但Innodb不能识别" class="headerlink" title="成一个默认的值，但Innodb不能识别"></a>成一个默认的值，但Innodb不能识别</h4><h4 id="如果没有指定等级，就相当于Restrict方式。"><a href="#如果没有指定等级，就相当于Restrict方式。" class="headerlink" title="如果没有指定等级，就相当于Restrict方式。"></a>如果没有指定等级，就相当于Restrict方式。</h4><h4 id="对于外键约束，最好是采用-ON-UPDATE-CASCADE-ON-DELETE-RESTRICT-的方式。"><a href="#对于外键约束，最好是采用-ON-UPDATE-CASCADE-ON-DELETE-RESTRICT-的方式。" class="headerlink" title="对于外键约束，最好是采用: ON UPDATE CASCADE ON DELETE RESTRICT 的方式。"></a>对于外键约束，最好是采用: ON UPDATE CASCADE ON DELETE RESTRICT 的方式。</h4><h4 id="（-1-）演示-1-：on-update-cascade-on-delete-set-null"><a href="#（-1-）演示-1-：on-update-cascade-on-delete-set-null" class="headerlink" title="（ 1 ）演示 1 ：on update cascade on delete set null"></a>（ 1 ）演示 1 ：on update cascade on delete set null</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">update emp set deptid = 1002 where eid = 1 ;#修改从表失败</span><br><span class="line">ERROR 1452 ( 23000 ): Cannot add（添加） or update（修改） a child row（子表的记录）: a</span><br><span class="line">foreign key constraint fails（外键约束失败） (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1`</span><br><span class="line">FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #部门表did字段现在没有 1002 的值，所以员工</span><br><span class="line">表中不能修改员工所在部门deptid为 1002</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">update dept set did = 1002 where did = 1001 ;#修改主表失败</span><br><span class="line">ERROR 1451 ( 23000 ): Cannot delete（删除） or update（修改） a parent row（父表的记录）: a</span><br><span class="line">foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY</span><br><span class="line">(`deptid`) REFERENCES `dept` (`did`)) #部门表did的 1001 字段已经被emp引用了，所以部门表的 1001 字</span><br><span class="line">段就不能修改了。</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update dept set did = 1002 where did = 1003 ;#修改主表成功 因为部门表的 1003 部门没有被emp表引</span><br><span class="line">用，所以可以修改</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">delete from dept where did= 1001 ; #删除主表失败</span><br><span class="line">ERROR 1451 ( 23000 ): Cannot delete（删除） or update（修改） a parent row（父表记录）: a</span><br><span class="line">foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY</span><br><span class="line">(`deptid`) REFERENCES `dept` (`did`))  #因为部门表did的 1001 字段已经被emp引用了，所以部门表的</span><br><span class="line">1001 字段对应的记录就不能被删除</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">did int primary key, #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">deptid int, #员工所在的部门</span><br><span class="line">foreign key (deptid) references dept(did)  on update cascade on delete set null</span><br><span class="line">#把修改操作设置为级联修改等级，把删除操作设置为set null等级</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>insert into dept values( 1001 ,’教学部’);<br>insert into dept values( 1002 , ‘财务部’);<br>insert into dept values( 1003 , ‘咨询部’);</p>
<p>insert into emp values( 1 ,’张三’, 1001 ); #在添加这条记录时，要求部门表有 1001 部门<br>insert into emp values( 2 ,’李四’, 1001 );<br>insert into emp values( 3 ,’王五’, 1002 );</p>
<p>mysql&gt; select * from dept;</p>
<p>mysql&gt; select * from emp;</p>
<h5 id="修改主表成功，从表也跟着修改，修改了主表被引用的字段-1002-为-1004-，从表的引用字段就跟着修改为-1004-了"><a href="#修改主表成功，从表也跟着修改，修改了主表被引用的字段-1002-为-1004-，从表的引用字段就跟着修改为-1004-了" class="headerlink" title="#修改主表成功，从表也跟着修改，修改了主表被引用的字段 1002 为 1004 ，从表的引用字段就跟着修改为 1004 了"></a>#修改主表成功，从表也跟着修改，修改了主表被引用的字段 1002 为 1004 ，从表的引用字段就跟着修改为 1004 了</h5><p>mysql&gt; update dept set did &#x3D; 1004 where did &#x3D; 1002 ;<br>Query OK, 1 row affected (0.00 sec)<br>Rows matched: 1 Changed: 1 Warnings: 0</p>
<p>mysql&gt; select * from dept;<br>+——+——–+<br>| did | dname |<br>+——+——–+<br>| 1001 | 教学部 |<br>| 1003 | 咨询部 |<br>| 1004 | 财务部 | #原来是 1002 ，修改为 1004<br>+——+——–+<br>3 rows in set (0.00 sec)</p>
<p>mysql&gt; select * from emp;<br>+—–+——-+——–+<br>| eid | ename | deptid |<br>+—–+——-+——–+<br>| 1 | 张三 | 1001 |<br>| 2 | 李四 | 1001 |<br>| 3 | 王五 | 1004 | #原来是 1002 ，跟着修改为 1004<br>+—–+——-+——–+<br>3 rows in set (0.00 sec)</p>
<p>#删除主表的记录成功，从表对应的字段的值被修改为null<br>mysql&gt; delete from dept where did &#x3D; 1001 ;<br>Query OK, 1 row affected (0.01 sec)</p>
<p>mysql&gt; select * from dept;<br>+——+——–+<br>| did | dname | #记录 1001 部门被删除了<br>+——+——–+<br>| 1003 | 咨询部 |<br>| 1004 | 财务部 |<br>+——+——–+<br>2 rows in set (0.00 sec)</p>
<p>mysql&gt; select * from emp;<br>+—–+——-+——–+<br>| eid | ename | deptid |<br>+—–+——-+——–+</p>
<h4 id="（-2-）演示-2-：on-update-set-null-on-delete-cascade"><a href="#（-2-）演示-2-：on-update-set-null-on-delete-cascade" class="headerlink" title="（ 2 ）演示 2 ：on update set null on delete cascade"></a>（ 2 ）演示 2 ：on update set null on delete cascade</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| 1 | 张三 | NULL | #原来引用 1001 部门的员工，deptid字段变为null</span><br><span class="line">| 2 | 李四 | NULL |</span><br><span class="line">| 3 | 王五 | 1004 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">did int primary key, #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">deptid int, #员工所在的部门</span><br><span class="line">foreign key (deptid) references dept(did)  on update set null on delete cascade</span><br><span class="line">#把修改操作设置为set null等级，把删除操作设置为级联删除等级</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values( 1001 ,&#x27;教学部&#x27;);</span><br><span class="line">insert into dept values( 1002 , &#x27;财务部&#x27;);</span><br><span class="line">insert into dept values( 1003 , &#x27;咨询部&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into emp values( 1 ,&#x27;张三&#x27;, 1001 ); #在添加这条记录时，要求部门表有 1001 部门</span><br><span class="line">insert into emp values( 2 ,&#x27;李四&#x27;, 1001 );</span><br><span class="line">insert into emp values( 3 ,&#x27;王五&#x27;, 1002 );</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | 教学部 |</span><br><span class="line">| 1002 | 财务部 |</span><br><span class="line">| 1003 | 咨询部 |</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | 张三 | 1001 |</span><br><span class="line">| 2 | 李四 | 1001 |</span><br><span class="line">| 3 | 王五 | 1002 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#修改主表，从表对应的字段设置为null</span><br><span class="line">mysql&gt; update dept set did = 1004 where did = 1002 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1 Changed: 1 Warnings: 0</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname |</span><br></pre></td></tr></table></figure>

<h4 id="（-3-）演示：on-update-cascade-on-delete-cascade"><a href="#（-3-）演示：on-update-cascade-on-delete-cascade" class="headerlink" title="（ 3 ）演示：on update cascade on delete cascade"></a>（ 3 ）演示：on update cascade on delete cascade</h4><h5 id="——-——–"><a href="#——-——–" class="headerlink" title="+——+——–+"></a>+——+——–+</h5><h5 id="1001-教学部"><a href="#1001-教学部" class="headerlink" title="| 1001 | 教学部 |"></a>| 1001 | 教学部 |</h5><h5 id="1003-咨询部"><a href="#1003-咨询部" class="headerlink" title="| 1003 | 咨询部 |"></a>| 1003 | 咨询部 |</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">| 1004 | 财务部 | #原来did是 1002</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | 张三 | 1001 |</span><br><span class="line">| 2 | 李四 | 1001 |</span><br><span class="line">| 3 | 王五 | NULL | #原来deptid是 1002 ，因为部门表 1002 被修改了， 1002 没有对应的了，就设置为</span><br><span class="line">null</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h5 id="删除主表的记录成功，主表的-1001-行被删除了，从表相应的记录也被删除了"><a href="#删除主表的记录成功，主表的-1001-行被删除了，从表相应的记录也被删除了" class="headerlink" title="#删除主表的记录成功，主表的 1001 行被删除了，从表相应的记录也被删除了"></a>#删除主表的记录成功，主表的 1001 行被删除了，从表相应的记录也被删除了</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from dept where did= 1001 ;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname | #部门表中 1001 部门被删除</span><br><span class="line">+------+--------+</span><br><span class="line">| 1003 | 咨询部 |</span><br><span class="line">| 1004 | 财务部 |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |#原来 1001 部门的员工也被删除了</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 3 | 王五 | NULL |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">did int primary key, #部门编号</span><br><span class="line">dname varchar( 50 ) #部门名称</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">eid int primary key,  #员工编号</span><br><span class="line">ename varchar( 5 ), #员工姓名</span><br><span class="line">deptid int, #员工所在的部门</span><br><span class="line">foreign key (deptid) references dept(did)  on update cascade on delete cascade</span><br><span class="line">#把修改操作设置为级联修改等级，把删除操作也设置为级联删除等级</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>insert into dept values( 1001 ,’教学部’);<br>insert into dept values( 1002 , ‘财务部’);<br>insert into dept values( 1003 , ‘咨询部’);</p>
<p>insert into emp values( 1 ,’张三’, 1001 ); #在添加这条记录时，要求部门表有 1001 部门<br>insert into emp values( 2 ,’李四’, 1001 );<br>insert into emp values( 3 ,’王五’, 1002 );</p>
<p>mysql&gt; select * from dept;<br>+——+——–+<br>| did | dname |<br>+——+——–+<br>| 1001 | 教学部 |<br>| 1002 | 财务部 |<br>| 1003 | 咨询部 |<br>+——+——–+<br>3 rows in set (0.00 sec)</p>
<p>mysql&gt; select * from emp;<br>+—–+——-+——–+<br>| eid | ename | deptid |<br>+—–+——-+——–+<br>| 1 | 张三 | 1001 |<br>| 2 | 李四 | 1001 |<br>| 3 | 王五 | 1002 |<br>+—–+——-+——–+<br>3 rows in set (0.00 sec)</p>
<h5 id="修改主表，从表对应的字段自动修改"><a href="#修改主表，从表对应的字段自动修改" class="headerlink" title="#修改主表，从表对应的字段自动修改"></a>#修改主表，从表对应的字段自动修改</h5><p>mysql&gt; update dept set did &#x3D; 1004 where did &#x3D; 1002 ;<br>Query OK, 1 row affected (0.00 sec)<br>Rows matched: 1 Changed: 1 Warnings: 0</p>
<p>mysql&gt; select * from dept;<br>+——+——–+<br>| did | dname |<br>+——+——–+<br>| 1001 | 教学部 |<br>| 1003 | 咨询部 |<br>| 1004 | 财务部 | #部门 1002 修改为 1004<br>+——+——–+<br>3 rows in set (0.00 sec)</p>
<p>mysql&gt; select * from emp;<br>+—–+——-+——–+<br>| eid | ename | deptid |<br>+—–+——-+——–+<br>| 1 | 张三 | 1001 |<br>| 2 | 李四 | 1001 |<br>| 3 | 王五 | 1004 | #级联修改<br>+—–+——-+——–+<br>3 rows in set (0.00 sec)</p>
<h5 id="删除主表的记录成功，主表的-1001-行被删除了，从表相应的记录也被删除了-1"><a href="#删除主表的记录成功，主表的-1001-行被删除了，从表相应的记录也被删除了-1" class="headerlink" title="#删除主表的记录成功，主表的 1001 行被删除了，从表相应的记录也被删除了"></a>#删除主表的记录成功，主表的 1001 行被删除了，从表相应的记录也被删除了</h5><p>mysql&gt; delete from dept where did&#x3D; 1001 ;<br>Query OK, 1 row affected (0.00 sec)</p>
<h3 id="6-8-删除外键约束"><a href="#6-8-删除外键约束" class="headerlink" title="6. 8 删除外键约束"></a>6. 8 删除外键约束</h3><h4 id="流程如下："><a href="#流程如下：" class="headerlink" title="流程如下："></a>流程如下：</h4><h4 id="举例：-10"><a href="#举例：-10" class="headerlink" title="举例："></a>举例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did | dname | #1001部门被删除了</span><br><span class="line">+------+--------+</span><br><span class="line">| 1003 | 咨询部 |</span><br><span class="line">| 1004 | 财务部 |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |  #1001部门的员工也被删除了</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 3 | 王五 | 1004 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h5 id="1-第一步先查看约束名和删除外键约束"><a href="#1-第一步先查看约束名和删除外键约束" class="headerlink" title="( 1 )第一步先查看约束名和删除外键约束"></a>( 1 )第一步先查看约束名和删除外键约束</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;表名称&#x27;;#查看某个</span><br><span class="line">表的约束名</span><br></pre></td></tr></table></figure>
<h5 id="ALTER-TABLE-从表名-DROP-FOREIGN-KEY-外键约束名"><a href="#ALTER-TABLE-从表名-DROP-FOREIGN-KEY-外键约束名" class="headerlink" title="ALTER TABLE 从表名 DROP FOREIGN KEY 外键约束名;"></a>ALTER TABLE 从表名 DROP FOREIGN KEY 外键约束名;</h5><h5 id="（-2-）第二步查看索引名和删除索引。（注意，只能手动删除）"><a href="#（-2-）第二步查看索引名和删除索引。（注意，只能手动删除）" class="headerlink" title="（ 2 ）第二步查看索引名和删除索引。（注意，只能手动删除）"></a>（ 2 ）第二步查看索引名和删除索引。（注意，只能手动删除）</h5><h5 id="SHOW-INDEX-FROM-表名称-查看某个表的索引名"><a href="#SHOW-INDEX-FROM-表名称-查看某个表的索引名" class="headerlink" title="SHOW INDEX FROM 表名称; #查看某个表的索引名"></a>SHOW INDEX FROM 表名称; #查看某个表的索引名</h5><h5 id="ALTER-TABLE-从表名-DROP-INDEX-索引名"><a href="#ALTER-TABLE-从表名-DROP-INDEX-索引名" class="headerlink" title="ALTER TABLE 从表名 DROP INDEX 索引名;"></a>ALTER TABLE 从表名 DROP INDEX 索引名;</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;emp&#x27;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table emp drop foreign key emp_ibfk_1;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line">Records: 0 Duplicates: 0 Warnings: 0</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show index from emp;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table emp drop index deptid;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line">Records: 0 Duplicates: 0 Warnings: 0</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;  show index from emp;</span><br></pre></td></tr></table></figure>

<h3 id="6-9-开发场景"><a href="#6-9-开发场景" class="headerlink" title="6. 9 开发场景"></a>6. 9 开发场景</h3><h4 id="问题-1-：如果两个表之间有关系（一对一、一对多），比如：员工表和部门表（一对多），它们之间是否"><a href="#问题-1-：如果两个表之间有关系（一对一、一对多），比如：员工表和部门表（一对多），它们之间是否" class="headerlink" title="问题 1 ：如果两个表之间有关系（一对一、一对多），比如：员工表和部门表（一对多），它们之间是否"></a>问题 1 ：如果两个表之间有关系（一对一、一对多），比如：员工表和部门表（一对多），它们之间是否</h4><h4 id="一定要建外键约束？"><a href="#一定要建外键约束？" class="headerlink" title="一定要建外键约束？"></a>一定要建外键约束？</h4><h4 id="答：不是的"><a href="#答：不是的" class="headerlink" title="答：不是的"></a>答：不是的</h4><h4 id="问题-2-：建和不建外键约束有什么区别？"><a href="#问题-2-：建和不建外键约束有什么区别？" class="headerlink" title="问题 2 ：建和不建外键约束有什么区别？"></a>问题 2 ：建和不建外键约束有什么区别？</h4><h4 id="答：建外键约束，你的操作（创建表、删除表、添加、修改、删除）会受到限制，从语法层面受到限"><a href="#答：建外键约束，你的操作（创建表、删除表、添加、修改、删除）会受到限制，从语法层面受到限" class="headerlink" title="答：建外键约束，你的操作（创建表、删除表、添加、修改、删除）会受到限制，从语法层面受到限"></a>答：建外键约束，你的操作（创建表、删除表、添加、修改、删除）会受到限制，从语法层面受到限</h4><h4 id="制。例如：在员工表中不可能添加一个员工信息，它的部门的值在部门表中找不到。"><a href="#制。例如：在员工表中不可能添加一个员工信息，它的部门的值在部门表中找不到。" class="headerlink" title="制。例如：在员工表中不可能添加一个员工信息，它的部门的值在部门表中找不到。"></a>制。例如：在员工表中不可能添加一个员工信息，它的部门的值在部门表中找不到。</h4><h4 id="不建外键约束，你的操作（创建表、删除表、添加、修改、删除）不受限制，要保证数据的引用完整"><a href="#不建外键约束，你的操作（创建表、删除表、添加、修改、删除）不受限制，要保证数据的引用完整" class="headerlink" title="不建外键约束，你的操作（创建表、删除表、添加、修改、删除）不受限制，要保证数据的引用完整"></a>不建外键约束，你的操作（创建表、删除表、添加、修改、删除）不受限制，要保证数据的引用完整</h4><h4 id="性，只能依靠程序员的自觉，或者是在Java程序中进行限定。例如：在员工表中，可以添加一个员工的"><a href="#性，只能依靠程序员的自觉，或者是在Java程序中进行限定。例如：在员工表中，可以添加一个员工的" class="headerlink" title="性，只能依靠程序员的自觉，或者是在Java程序中进行限定。例如：在员工表中，可以添加一个员工的"></a>性，只能依靠程序员的自觉，或者是在Java程序中进行限定。例如：在员工表中，可以添加一个员工的</h4><h4 id="信息，它的部门指定为一个完全不存在的部门。"><a href="#信息，它的部门指定为一个完全不存在的部门。" class="headerlink" title="信息，它的部门指定为一个完全不存在的部门。"></a>信息，它的部门指定为一个完全不存在的部门。</h4><h4 id="问题-3-：那么建和不建外键约束和查询有没有关系？"><a href="#问题-3-：那么建和不建外键约束和查询有没有关系？" class="headerlink" title="问题 3 ：那么建和不建外键约束和查询有没有关系？"></a>问题 3 ：那么建和不建外键约束和查询有没有关系？</h4><h4 id="答：没有"><a href="#答：没有" class="headerlink" title="答：没有"></a>答：没有</h4><h4 id="在-MySQL-里，外键约束是有成本的，需要消耗系统资源。对于大并发的-SQL-操作，有可能会不适"><a href="#在-MySQL-里，外键约束是有成本的，需要消耗系统资源。对于大并发的-SQL-操作，有可能会不适" class="headerlink" title="在 MySQL 里，外键约束是有成本的，需要消耗系统资源。对于大并发的 SQL 操作，有可能会不适"></a>在 MySQL 里，外键约束是有成本的，需要消耗系统资源。对于大并发的 SQL 操作，有可能会不适</h4><h4 id="合。比如大型网站的中央数据库，可能会因为外键约束的系统开销而变得非常慢。所以，-MySQL-允"><a href="#合。比如大型网站的中央数据库，可能会因为外键约束的系统开销而变得非常慢。所以，-MySQL-允" class="headerlink" title="合。比如大型网站的中央数据库，可能会因为外键约束的系统开销而变得非常慢。所以， MySQL 允"></a>合。比如大型网站的中央数据库，可能会因为外键约束的系统开销而变得非常慢。所以， MySQL 允</h4><h4 id="许你不使用系统自带的外键约束，在应用层面完成检查数据一致性的逻辑。也就是说，即使你不"><a href="#许你不使用系统自带的外键约束，在应用层面完成检查数据一致性的逻辑。也就是说，即使你不" class="headerlink" title="许你不使用系统自带的外键约束，在应用层面完成检查数据一致性的逻辑。也就是说，即使你不"></a>许你不使用系统自带的外键约束，在应用层面完成检查数据一致性的逻辑。也就是说，即使你不</h4><h4 id="用外键约束，也要想办法通过应用层面的附加逻辑，来实现外键约束的功能，确保数据的一致性。"><a href="#用外键约束，也要想办法通过应用层面的附加逻辑，来实现外键约束的功能，确保数据的一致性。" class="headerlink" title="用外键约束，也要想办法通过应用层面的附加逻辑，来实现外键约束的功能，确保数据的一致性。"></a>用外键约束，也要想办法通过应用层面的附加逻辑，来实现外键约束的功能，确保数据的一致性。</h4><h3 id="6-10-阿里开发规范"><a href="#6-10-阿里开发规范" class="headerlink" title="6. 10 阿里开发规范"></a>6. 10 阿里开发规范</h3><h4 id="【强制】不得使用外键与级联，一切外键概念必须在应用层解决。"><a href="#【强制】不得使用外键与级联，一切外键概念必须在应用层解决。" class="headerlink" title="【强制】不得使用外键与级联，一切外键概念必须在应用层解决。"></a>【强制】不得使用外键与级联，一切外键概念必须在应用层解决。</h4><h4 id="说明：（概念解释）学生表中的-student-id-是主键，那么成绩表中的-student-id-则为外键。如果更新学"><a href="#说明：（概念解释）学生表中的-student-id-是主键，那么成绩表中的-student-id-则为外键。如果更新学" class="headerlink" title="说明：（概念解释）学生表中的 student_id 是主键，那么成绩表中的 student_id 则为外键。如果更新学"></a>说明：（概念解释）学生表中的 student_id 是主键，那么成绩表中的 student_id 则为外键。如果更新学</h4><h4 id="生表中的-student-id，同时触发成绩表中的-student-id-更新，即为级联更新。外键与级联更新适用于单"><a href="#生表中的-student-id，同时触发成绩表中的-student-id-更新，即为级联更新。外键与级联更新适用于单" class="headerlink" title="生表中的 student_id，同时触发成绩表中的 student_id 更新，即为级联更新。外键与级联更新适用于单"></a>生表中的 student_id，同时触发成绩表中的 student_id 更新，即为级联更新。外键与级联更新适用于单</h4><h4 id="机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响"><a href="#机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响" class="headerlink" title="机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响"></a>机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响</h4><h4 id="数据库的插入速度。"><a href="#数据库的插入速度。" class="headerlink" title="数据库的插入速度。"></a>数据库的插入速度。</h4><h2 id="7-CHECK-约束"><a href="#7-CHECK-约束" class="headerlink" title="7. CHECK 约束"></a>7. CHECK 约束</h2><h3 id="7-1-作用"><a href="#7-1-作用" class="headerlink" title="7. 1 作用"></a>7. 1 作用</h3><h4 id="检查某个字段的值是否符号xx要求，一般指的是值的范围"><a href="#检查某个字段的值是否符号xx要求，一般指的是值的范围" class="headerlink" title="检查某个字段的值是否符号xx要求，一般指的是值的范围"></a>检查某个字段的值是否符号xx要求，一般指的是值的范围</h4><h3 id="2-、关键字"><a href="#2-、关键字" class="headerlink" title="2 、关键字"></a>2 、关键字</h3><h4 id="CHECK"><a href="#CHECK" class="headerlink" title="CHECK"></a>CHECK</h4><h3 id="3-、说明：MySQL-5-7-不支持"><a href="#3-、说明：MySQL-5-7-不支持" class="headerlink" title="3 、说明：MySQL 5. 7 不支持"></a>3 、说明：MySQL 5. 7 不支持</h3><h4 id="MySQL5-7-可以使用check约束，但check约束对数据验证没有任何作用。添加数据时，没有任何错误或警"><a href="#MySQL5-7-可以使用check约束，但check约束对数据验证没有任何作用。添加数据时，没有任何错误或警" class="headerlink" title="MySQL5.7 可以使用check约束，但check约束对数据验证没有任何作用。添加数据时，没有任何错误或警"></a>MySQL5.7 可以使用check约束，但check约束对数据验证没有任何作用。添加数据时，没有任何错误或警</h4><h4 id="告"><a href="#告" class="headerlink" title="告"></a>告</h4><h4 id="但是-MySQL-8-0中可以使用check约束了-。"><a href="#但是-MySQL-8-0中可以使用check约束了-。" class="headerlink" title="但是 MySQL 8.0中可以使用check约束了 。"></a>但是 MySQL 8.0中可以使用check约束了 。</h4><h4 id="再举例-1"><a href="#再举例-1" class="headerlink" title="再举例"></a>再举例</h4><h4 id="再举例-2"><a href="#再举例-2" class="headerlink" title="再举例"></a>再举例</h4><h4 id="再举例-3"><a href="#再举例-3" class="headerlink" title="再举例"></a>再举例</h4><h2 id="8-DEFAULT约束"><a href="#8-DEFAULT约束" class="headerlink" title="8. DEFAULT约束"></a>8. DEFAULT约束</h2><h3 id="8-1-作用"><a href="#8-1-作用" class="headerlink" title="8. 1 作用"></a>8. 1 作用</h3><h4 id="给某个字段-某列指定默认值，一旦设置默认值，在插入数据时，如果此字段没有显式赋值，则赋值为默"><a href="#给某个字段-某列指定默认值，一旦设置默认值，在插入数据时，如果此字段没有显式赋值，则赋值为默" class="headerlink" title="给某个字段&#x2F;某列指定默认值，一旦设置默认值，在插入数据时，如果此字段没有显式赋值，则赋值为默"></a>给某个字段&#x2F;某列指定默认值，一旦设置默认值，在插入数据时，如果此字段没有显式赋值，则赋值为默</h4><h4 id="认值。"><a href="#认值。" class="headerlink" title="认值。"></a>认值。</h4><h3 id="8-2-关键字"><a href="#8-2-关键字" class="headerlink" title="8. 2 关键字"></a>8. 2 关键字</h3><h4 id="DEFAULT"><a href="#DEFAULT" class="headerlink" title="DEFAULT"></a>DEFAULT</h4><h3 id="8-3-如何给字段加默认值"><a href="#8-3-如何给字段加默认值" class="headerlink" title="8. 3 如何给字段加默认值"></a>8. 3 如何给字段加默认值</h3><h4 id="（-1-）建表时-4"><a href="#（-1-）建表时-4" class="headerlink" title="（ 1 ）建表时"></a>（ 1 ）建表时</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">eid int primary key,</span><br><span class="line">ename varchar( 5 ),</span><br><span class="line">gender char check (&#x27;男&#x27; or &#x27;女&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee values( 1 ,&#x27;张三&#x27;,&#x27;妖&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | gender |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| 1 | 张三 | 妖 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE temp(</span><br><span class="line">id INT AUTO_INCREMENT,</span><br><span class="line">NAME VARCHAR( 20 ),</span><br><span class="line">age INT CHECK(age &gt; 20 ),</span><br><span class="line">PRIMARY KEY(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">age tinyint check(age &gt; 20 ) 或 sex char( 2 ) check(sex in(‘男’,’女’))</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHECK(height&gt;= 0 AND height&lt; 3 )</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 表名称(</span><br><span class="line">字段名 数据类型 primary key,</span><br><span class="line">字段名 数据类型 unique key not null,</span><br><span class="line">字段名 数据类型 unique key,</span><br><span class="line">字段名 数据类型 not null default 默认值,</span><br><span class="line">);</span><br><span class="line">create table 表名称(</span><br></pre></td></tr></table></figure>

<h4 id="再举例：-1"><a href="#再举例：-1" class="headerlink" title="再举例："></a>再举例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">字段名 数据类型 default 默认值 ,</span><br><span class="line">字段名 数据类型 not null default 默认值,</span><br><span class="line">字段名 数据类型 not null default 默认值,</span><br><span class="line">primary key(字段名),</span><br><span class="line">unique key(字段名)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="说明：默认值约束一般不在唯一键和主键列上加"><a href="#说明：默认值约束一般不在唯一键和主键列上加" class="headerlink" title="说明：默认值约束一般不在唯一键和主键列上加"></a>说明：默认值约束一般不在唯一键和主键列上加</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">eid int primary key,</span><br><span class="line">ename varchar( 20 ) not null,</span><br><span class="line">gender char default &#x27;男&#x27;,</span><br><span class="line">tel char( 11 ) not null default &#x27;&#x27; #默认是空字符串</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | NO | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | 男 | |</span><br><span class="line">| tel | char( 11 ) | NO | | | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee values( 1 ,&#x27;汪飞&#x27;,&#x27;男&#x27;,&#x27;13700102535&#x27;); #成功</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| eid | ename | gender | tel |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| 1 | 汪飞 | 男 | 13700102535 |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee(eid,ename) values( 2 ,&#x27;天琪&#x27;); #成功</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| eid | ename | gender | tel |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| 1 | 汪飞 | 男 | 13700102535 |</span><br><span class="line">| 2 | 天琪 | 男 | |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into employee(eid,ename) values( 3 ,&#x27;二虎&#x27;);</span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;&#x27; for key &#x27;tel&#x27;</span><br><span class="line">#如果tel有唯一性约束的话会报错，如果tel没有唯一性约束，可以添加成功</span><br></pre></td></tr></table></figure>

<h4 id="（-2-）建表后-3"><a href="#（-2-）建表后-3" class="headerlink" title="（ 2 ）建表后"></a>（ 2 ）建表后</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE myemp(</span><br><span class="line">id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">NAME VARCHAR( 15 ),</span><br><span class="line">salary DOUBLE( 10 , 2 ) DEFAULT 2000</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 数据类型 default 默认值;</span><br></pre></td></tr></table></figure>
<h5 id="如果这个字段原来有非空约束，你还保留非空约束，那么在加默认值约束时，还得保留非空约束，否则非空约束就被"><a href="#如果这个字段原来有非空约束，你还保留非空约束，那么在加默认值约束时，还得保留非空约束，否则非空约束就被" class="headerlink" title="#如果这个字段原来有非空约束，你还保留非空约束，那么在加默认值约束时，还得保留非空约束，否则非空约束就被"></a>#如果这个字段原来有非空约束，你还保留非空约束，那么在加默认值约束时，还得保留非空约束，否则非空约束就被</h5><h5 id="删除了"><a href="#删除了" class="headerlink" title="删除了"></a>删除了</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#同理，在给某个字段加非空约束也一样，如果这个字段原来有默认值约束，你想保留，也要在modify语句中保留默</span><br><span class="line">认值约束，否则就删除了</span><br><span class="line">alter table 表名称 modify 字段名 数据类型 default 默认值 not null;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">eid int primary key,</span><br><span class="line">ename varchar( 20 ),</span><br><span class="line">gender char,</span><br><span class="line">tel char( 11 ) not null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | NULL | |</span><br><span class="line">| tel | char( 11 ) | NO | | NULL | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify gender char default &#x27;男&#x27;;  #给gender字段增加默认值约束</span><br><span class="line">alter table employee modify tel char( 11 ) default &#x27;&#x27;; #给tel字段增加默认值约束</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | 男 | |</span><br><span class="line">| tel | char( 11 ) | YES | | | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify tel char( 11 ) default &#x27;&#x27; not null;#给tel字段增加默认值约束，并</span><br><span class="line">保留非空约束</span><br></pre></td></tr></table></figure>

<h3 id="8-4-如何删除默认值约束"><a href="#8-4-如何删除默认值约束" class="headerlink" title="8. 4 如何删除默认值约束"></a>8. 4 如何删除默认值约束</h3><h2 id="9-面试"><a href="#9-面试" class="headerlink" title="9. 面试"></a>9. 面试</h2><h4 id="面试-1-、为什么建表时，加-not-null-default-‘’-或-default-0"><a href="#面试-1-、为什么建表时，加-not-null-default-‘’-或-default-0" class="headerlink" title="面试 1 、为什么建表时，加 not null default ‘’ 或 default 0"></a>面试 1 、为什么建表时，加 not null default ‘’ 或 default 0</h4><h4 id="答：不想让表中出现null值。"><a href="#答：不想让表中出现null值。" class="headerlink" title="答：不想让表中出现null值。"></a>答：不想让表中出现null值。</h4><h4 id="面试-2-、为什么不想要-null-的值"><a href="#面试-2-、为什么不想要-null-的值" class="headerlink" title="面试 2 、为什么不想要 null 的值"></a>面试 2 、为什么不想要 null 的值</h4><h4 id="答-（-1-）不好比较。null是一种特殊值，比较时只能用专门的is-null-和-is-not-null来比较。碰到运算符，通"><a href="#答-（-1-）不好比较。null是一种特殊值，比较时只能用专门的is-null-和-is-not-null来比较。碰到运算符，通" class="headerlink" title="答:（ 1 ）不好比较。null是一种特殊值，比较时只能用专门的is null 和 is not null来比较。碰到运算符，通"></a>答:（ 1 ）不好比较。null是一种特殊值，比较时只能用专门的is null 和 is not null来比较。碰到运算符，通</h4><h4 id="常返回null。"><a href="#常返回null。" class="headerlink" title="常返回null。"></a>常返回null。</h4><h4 id="（-2-）效率不高。影响提高索引效果。因此，我们往往在建表时-not-null-default-‘’-或-default-0"><a href="#（-2-）效率不高。影响提高索引效果。因此，我们往往在建表时-not-null-default-‘’-或-default-0" class="headerlink" title="（ 2 ）效率不高。影响提高索引效果。因此，我们往往在建表时 not null default ‘’ 或 default 0"></a>（ 2 ）效率不高。影响提高索引效果。因此，我们往往在建表时 not null default ‘’ 或 default 0</h4><h4 id="面试-3-、带AUTO-INCREMENT约束的字段值是从-1-开始的吗？-在MySQL中，默认AUTO-INCREMENT的初始"><a href="#面试-3-、带AUTO-INCREMENT约束的字段值是从-1-开始的吗？-在MySQL中，默认AUTO-INCREMENT的初始" class="headerlink" title="面试 3 、带AUTO_INCREMENT约束的字段值是从 1 开始的吗？ 在MySQL中，默认AUTO_INCREMENT的初始"></a>面试 3 、带AUTO_INCREMENT约束的字段值是从 1 开始的吗？ 在MySQL中，默认AUTO_INCREMENT的初始</h4><h4 id="值是-1-，每新增一条记录，字段值自动加-1-。设置自增属性（AUTO-INCREMENT）的时候，还可以指定第"><a href="#值是-1-，每新增一条记录，字段值自动加-1-。设置自增属性（AUTO-INCREMENT）的时候，还可以指定第" class="headerlink" title="值是 1 ，每新增一条记录，字段值自动加 1 。设置自增属性（AUTO_INCREMENT）的时候，还可以指定第"></a>值是 1 ，每新增一条记录，字段值自动加 1 。设置自增属性（AUTO_INCREMENT）的时候，还可以指定第</h4><h4 id="一条插入记录的自增字段的值，这样新插入的记录的自增字段值从初始值开始递增，如在表中插入第一"><a href="#一条插入记录的自增字段的值，这样新插入的记录的自增字段值从初始值开始递增，如在表中插入第一" class="headerlink" title="一条插入记录的自增字段的值，这样新插入的记录的自增字段值从初始值开始递增，如在表中插入第一"></a>一条插入记录的自增字段的值，这样新插入的记录的自增字段值从初始值开始递增，如在表中插入第一</h4><h4 id="条记录，同时指定id值为-5-，则以后插入的记录的id值就会从-6-开始往上增加。添加主键约束时，往往需要"><a href="#条记录，同时指定id值为-5-，则以后插入的记录的id值就会从-6-开始往上增加。添加主键约束时，往往需要" class="headerlink" title="条记录，同时指定id值为 5 ，则以后插入的记录的id值就会从 6 开始往上增加。添加主键约束时，往往需要"></a>条记录，同时指定id值为 5 ，则以后插入的记录的id值就会从 6 开始往上增加。添加主键约束时，往往需要</h4><h4 id="设置字段自动增加属性。"><a href="#设置字段自动增加属性。" class="headerlink" title="设置字段自动增加属性。"></a>设置字段自动增加属性。</h4><h4 id="面试-4-、并不是每个表都可以任意选择存储引擎？-外键约束（FOREIGN-KEY）不能跨引擎使用。"><a href="#面试-4-、并不是每个表都可以任意选择存储引擎？-外键约束（FOREIGN-KEY）不能跨引擎使用。" class="headerlink" title="面试 4 、并不是每个表都可以任意选择存储引擎？ 外键约束（FOREIGN KEY）不能跨引擎使用。"></a>面试 4 、并不是每个表都可以任意选择存储引擎？ 外键约束（FOREIGN KEY）不能跨引擎使用。</h4><h4 id="MySQL支持多种存储引擎，每一个表都可以指定一个不同的存储引擎，需要注意的是：外键约束是用来"><a href="#MySQL支持多种存储引擎，每一个表都可以指定一个不同的存储引擎，需要注意的是：外键约束是用来" class="headerlink" title="MySQL支持多种存储引擎，每一个表都可以指定一个不同的存储引擎，需要注意的是：外键约束是用来"></a>MySQL支持多种存储引擎，每一个表都可以指定一个不同的存储引擎，需要注意的是：外键约束是用来</h4><h4 id="保证数据的参照完整性的，如果表之间需要关联外键，却指定了不同的存储引擎，那么这些表之间是不"><a href="#保证数据的参照完整性的，如果表之间需要关联外键，却指定了不同的存储引擎，那么这些表之间是不" class="headerlink" title="保证数据的参照完整性的，如果表之间需要关联外键，却指定了不同的存储引擎，那么这些表之间是不"></a>保证数据的参照完整性的，如果表之间需要关联外键，却指定了不同的存储引擎，那么这些表之间是不</h4><h4 id="能创建外键约束的。所以说，存储引擎的选择也不完全是随意的。"><a href="#能创建外键约束的。所以说，存储引擎的选择也不完全是随意的。" class="headerlink" title="能创建外键约束的。所以说，存储引擎的选择也不完全是随意的。"></a>能创建外键约束的。所以说，存储引擎的选择也不完全是随意的。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | 男 | |</span><br><span class="line">| tel | char( 11 ) | NO | | | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 数据类型 ;#删除默认值约束，也不保留非空约束</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名称 modify 字段名 数据类型 not null; #删除默认值约束，保留非空约束</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify gender char; #删除gender字段默认值约束，如果有非空约束，也一并删除</span><br><span class="line">alter table employee modify tel char( 11 )  not null;#删除tel字段默认值约束，保留非空约束</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid | int( 11 ) | NO | PRI | NULL | |</span><br><span class="line">| ename | varchar( 20 ) | YES | | NULL | |</span><br><span class="line">| gender | char( 1 ) | YES | | NULL | |</span><br><span class="line">| tel | char( 11 ) | NO | | NULL | |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>







<hr>
<hr>
<p>© 版权声明</p>
<escape>

<div>
    <h3 align="center"  style="color: brown;" >版权声明</h3>
    <table>
           <tr>
            <ol>
                <li>本网站名称：𝚲𝚳𝚲</li>
                <li>𝚲𝚳𝚲提供的资源仅供您个人用于非商业性目的。</li>
                <li>本站文章部分内容可能来源于网络，仅供大家学习与参考，如有侵权，请联系我进行删除处理。</li>
                <li>本站一切资源不代表本站立场，并不代表本站赞同其观点和对其真实性负责。</li>
                <li>本站一律禁止以任何方式发布或转载任何违法的相关信息，访客发现请举报</li> 
                <li>本站资源大多存储在云盘，如发现链接失效，请联系我，我会第一时间更新。</li>
                <li>本站强烈打击盗版/破解等有损他人权益和违法作为，请支持正版！</li>  
            </ol>
        </tr>
    </table>
</div>






</escape>

<hr>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://protonlml.github.io/2019/10/03/mysql/10.mysql%E7%AC%AC13%E7%AB%A0%E7%BA%A6%E6%9D%9F/" title="10.mysql第13章约束" target="_blank" rel="external">https://protonlml.github.io/2019/10/03/mysql/10.mysql第13章约束/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">𝚲𝚳𝚲</span><small class="ml-1x">◙</small></a></h3>
        <div>业精于勤，荒于嬉；行成于思，毁于随！</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2019/10/06/javaweb/1.vue(%E7%BC%96%E7%A8%8B%E4%B8%8D%E8%89%AF%E4%BA%BA)/" title="1.vue"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2019/10/03/mysql/9.mysql%E7%AC%AC12%E7%AB%A0%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%B2%BE%E8%AE%B2/" title="9.mysql第12章数据类型精讲"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">老板发财！老板发财！老板发财！</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">老板发财！老板发财！老板发财！</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/protonlml" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2019 - 2024 𝚲𝚳𝚲
        
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   






</body>
<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
</html>